# [霍夫曼树](https://oi-wiki.org/ds/huffman-tree/)
## 霍夫曼树（Huffman Tree）简介

霍夫曼树是一种 **带权路径长度最短的二叉树**，也称为**最优二叉树**。它是基于权重构建的一种树形结构，在数据压缩、编码等领域中有着广泛的应用。霍夫曼树的典型应用是 **霍夫曼编码**，用于无损数据压缩。

---

## **基本概念**

1. **权重**：
    - 每个节点都带有一个权值，通常表示数据的频率或重要性。
2. **路径**：
    - 在树中，从一个节点到另一个节点的通路称为路径。
3. **路径长度**：
    - 从树的根节点到某一节点的路径上的边数，称为该节点的路径长度。
4. **节点的带权路径长度**：
    - 节点的带权路径长度=路径长度$*$该节点权值。
5. **树的带权路径长度（WPL, Weighted Path Length）**：
    - 树中所有叶子节点的权值乘以其路径长度的总和。
    - 公式：$WPL = \sum_{i=1}^n (w_i \times l_i)$
        - $w_i$：第 i 个叶子节点的权值。
        - $l_i$：第 i 个叶子节点的路径长度。
6. **霍夫曼树**：
    - 一棵带权路径长度最短的二叉树称为霍夫曼树。它通过贪心策略构建，尽量将权值较大的节点靠近根节点，从而减少整体的路径长度。

---

## **霍夫曼树的构建方法**

霍夫曼树的构建基于 **贪心算法**，主要步骤如下：

### 输入：
给定 $n$ 个权值（频率）。

### 输出：
构造出一棵带权路径长度最小的二叉树。

### 构建步骤：
1. **将权值集合视为一个森林**：
    - 每个权值看作一个只有单个节点的树。
2. **重复以下步骤，直到只剩一棵树**：
    1. 从森林中选出权值最小的两棵树。
    2. 构造一个新树：
        - 将这两棵树作为新树的左子树和右子树。
        - 新树的根节点权值为两棵子树权值的和。
    3. 将新树加入森林，并删除原来的两棵树。
3. **最终剩下的树即为霍夫曼树**。

### 示例：

假设有 4 个权值：$w = \{2, 3, 5, 3\}$，构建霍夫曼树的过程如下：

- **初始化**： 将权值视为单节点的树：$w = \{2, 3, 5, 3\}$。

- **第一次合并**： 选出最小的两个权值 2 和 3，合并成一棵新树，根节点权值为2+3=5。森林变为：$\{4, 5, 5\}$。

- **第二次合并**： 选出最小的两个权值 4 和 5，合并成一棵新树，根节点权值为 4+5=9。森林变为：{5, 9}。

- **第四次合并**： 合并剩下的两棵树 6 和 9，根节点权值为 6 + 9 = 14。最终构成霍夫曼树。

![huffman-tree-2.svg](https://oi-wiki.org/ds/images/huffman-tree-2.svg)
---

## 霍夫曼树的性质

1. **最优性**：
	 - 霍夫曼树是带权路径长度最短的二叉树，确保数据编码的平均长度最短。
1. **唯一性**：
    - 对于一组权值，霍夫曼树的结构可能不唯一，但带权路径长度（WPL）是唯一的。
3. **二叉树结构**：
    - 霍夫曼树是二叉树，每个非叶子节点都有两个子节点。

---

## 霍夫曼编码

霍夫曼树的主要应用是 **霍夫曼编码**，它是一种无损数据压缩方法。通过给出现频率高的符号分配较短的编码，出现频率低的符号分配较长的编码，可以有效减少编码总长度。

### 霍夫曼编码步骤：
1. 构建霍夫曼树。
2. 从根节点到每个叶子节点的路径中：
    - 左子树路径赋值为 0；
    - 右子树路径赋值为 1。
3. 每个叶子节点对应一个唯一的二进制编码。
### 示例：

假设有字符及其出现频率：

$\text{A:35, B:25, C:15, D:15, E:10}$

1. **构建霍夫曼树**：
    - 初始森林：$\{10, 15, 15, 25, 35\}$
    - 合并最小的两个权值E与D $10+15=25$森林为 $\{15, 25, 25, 35\}$
    - 合并B与C 15+25=40：$\{25, 35, 40\}$
    - 合并 $25+35=60：\{40, 60\}$
    - 合并 40+60=100：完成霍夫曼树。
2. **生成霍夫曼编码**：
    - 根据树的路径，得到编码：
        - A: 11
        - B: 00
        - C: 01
        - D: 101
        - E: 100

![](https://oi-wiki.org/ds/images/huffman-tree-3.svg)

---

## 霍夫曼树的应用

1. **数据压缩**：
    - 文件压缩工具（如 ZIP、GZIP）中广泛使用霍夫曼编码。
2. **通信领域**：
    - 在通信协议中使用霍夫曼编码实现高效传输。
3. **文件存储**：
    - 霍夫曼编码用于减少文本和二进制文件的存储空间。

---

## 霍夫曼树的优缺点

### 优点：
1. 最优二叉树：带权路径长度最短。
2. 高效：适用于高频数据的压缩，能显著减少存储空间。
3. 简单易实现：构建和编码的过程易于实现。
### 缺点：
1. 静态性：霍夫曼编码在构建时需要预先知道权值分布，对动态数据不够高效。
2. 不适合小规模数据：对于少量数据，压缩效果可能不明显。

---

## 总结
- **霍夫曼树**是一种带权路径长度最短的二叉树，构建过程使用贪心算法。
- 它的主要应用是 **霍夫曼编码**，广泛用于数据压缩领域。
- **关键点**：
    - 构建霍夫曼树的核心是贪心策略。
    - 霍夫曼编码通过为高频符号分配较短编码，显著降低了编码总长度。

霍夫曼树是无损压缩领域的基础，是理解压缩算法的核心工具之一。













