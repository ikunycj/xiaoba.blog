## 1. å¯¹ Redux çš„ç†è§£ï¼Œä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜

Redux æ˜¯ JavaScript åº”ç”¨çš„ **çŠ¶æ€ç®¡ç†åº“**ï¼Œä¸»è¦ç”¨äºç®¡ç† **å…¨å±€çŠ¶æ€**ï¼Œä½¿å¾—çŠ¶æ€å˜åŒ–å¯é¢„æµ‹ã€å¯è¿½è¸ªï¼Œæ–¹ä¾¿è°ƒè¯•å’Œç»´æŠ¤ã€‚

---

### ä¸€ã€Redux ä¸»è¦è§£å†³çš„é—®é¢˜

#### 1. ç»„ä»¶é—´çŠ¶æ€å…±äº«å¤æ‚

- åœ¨ React åº”ç”¨ä¸­ï¼Œç»„ä»¶çš„çŠ¶æ€ï¼ˆstateï¼‰é»˜è®¤æ˜¯**å±€éƒ¨çš„**ï¼Œåªèƒ½åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ã€‚
- å½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çŠ¶æ€æ—¶ï¼Œé€šå¸¸éœ€è¦ï¼š
    - **çŠ¶æ€æå‡ï¼ˆLifting State Upï¼‰**ï¼šæŠŠçŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶ï¼Œç„¶åé€šè¿‡ `props` ä¼ é€’ã€‚
    - **Context API**ï¼šä½¿ç”¨ `React.createContext()` æä¾›å…¨å±€çŠ¶æ€ã€‚

â¡ **é—®é¢˜**ï¼š

- çŠ¶æ€æå‡ä¼šå¯¼è‡´â€œ**çŠ¶æ€æå‡åœ°ç‹±**â€ï¼ˆProp Drillingï¼‰ï¼Œå±‚å±‚ä¼ é€’ `props`ï¼Œä½¿å¾—ä»£ç éš¾ä»¥ç»´æŠ¤ã€‚
- Context API é€‚ç”¨äºå°å‹é¡¹ç›®ï¼Œä½†å¯¹äºå¤§å‹åº”ç”¨ï¼ŒçŠ¶æ€çš„æ›´æ–°ç®¡ç†å˜å¾—å›°éš¾ã€‚

Redux é€šè¿‡ **å…¨å±€çŠ¶æ€å­˜å‚¨**ï¼Œè®©å¤šä¸ªç»„ä»¶å¯ä»¥**ç›´æ¥è®¿é—®å’Œæ›´æ–°**çŠ¶æ€ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ä¼ é€’ `props`ï¼Œè§£å†³äº†ç»„ä»¶é—´çŠ¶æ€å…±äº«çš„å¤æ‚æ€§ã€‚

---

#### 2. ç»„ä»¶çŠ¶æ€ç®¡ç†æ··ä¹±

åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œç»„ä»¶å¯èƒ½ï¼š

- éœ€è¦è®¿é—®ä¸åŒå±‚çº§çš„æ•°æ®ã€‚
- ä¾èµ–å¤šä¸ªçŠ¶æ€æ¥æºï¼Œéš¾ä»¥è·Ÿè¸ªæ•°æ®å˜åŒ–ã€‚

â¡ **é—®é¢˜**ï¼š

- `setState` åªèƒ½å±€éƒ¨ç®¡ç†ï¼Œå¤šä¸ªç»„ä»¶çš„æ•°æ®æµéš¾ä»¥è·Ÿè¸ªã€‚
- **å‰¯ä½œç”¨ç®¡ç†ï¼ˆå¼‚æ­¥è¯·æ±‚ç­‰ï¼‰** å¯èƒ½å¯¼è‡´çŠ¶æ€ç®¡ç†æ··ä¹±ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚

Redux å¼ºè°ƒ**å•å‘æ•°æ®æµ**ï¼Œæ‰€æœ‰çš„çŠ¶æ€æ›´æ–°éƒ½å¿…é¡»é€šè¿‡ `dispatch(action)` è§¦å‘ï¼Œç¡®ä¿æ•°æ®å˜åŒ–å¯é¢„æµ‹ã€å¯è¿½è¸ªã€‚

---

#### 3. çŠ¶æ€çš„å¯é¢„æµ‹æ€§ä¸å¯è°ƒè¯•æ€§

åœ¨ React ä¸­ï¼Œç»„ä»¶å†…éƒ¨ `setState` æ›´æ–°çš„è¿‡ç¨‹æ˜¯ **å¼‚æ­¥çš„**ï¼Œè€Œä¸” **ä¸åŒç»„ä»¶çš„ `setState` æ›´æ–°é€»è¾‘å¯èƒ½åˆ†æ•£åœ¨ä»£ç çš„å¤šä¸ªåœ°æ–¹**ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†å’Œè°ƒè¯•ã€‚

â¡ **é—®é¢˜**ï¼š

- çŠ¶æ€å˜åŒ–ä¸å¯é¢„æµ‹ï¼Œå¤šä¸ª `setState` å¯èƒ½å¯¼è‡´ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰ã€‚
- Debuggingï¼ˆè°ƒè¯•ï¼‰å›°éš¾ï¼Œéš¾ä»¥çŸ¥é“**å“ªä¸ªç»„ä»¶ä½•æ—¶ä¿®æ”¹äº†çŠ¶æ€**ã€‚

Redux é€šè¿‡ **å•ä¸€æ•°æ®æºï¼ˆSingle Source of Truthï¼‰** è®¾è®¡ï¼š

- **æ‰€æœ‰çŠ¶æ€éƒ½å­˜å‚¨åœ¨ä¸€ä¸ª `store` é‡Œ**ï¼Œä¸ä¼šåˆ†æ•£åœ¨å¤šä¸ªç»„ä»¶å†…éƒ¨ã€‚
- **çŠ¶æ€åªèƒ½é€šè¿‡ `dispatch(action)` è§¦å‘ reducer è¿›è¡Œä¿®æ”¹**ï¼Œä¿è¯äº†æ•°æ®æµçš„å¯é¢„æµ‹æ€§ã€‚
- é…åˆ Redux DevToolsï¼Œå¯ä»¥**è·Ÿè¸ªçŠ¶æ€çš„å˜åŒ–å†å²**ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚

---

#### 4. é€‚ç”¨äºå¤§å‹åº”ç”¨

- åœ¨å°å‹åº”ç”¨ä¸­ï¼Œ`useState` æˆ– `useContext` å¯èƒ½å·²ç»è¶³å¤Ÿã€‚
- ä½†åœ¨**å¤§å‹åº”ç”¨**ä¸­ï¼ŒçŠ¶æ€ä¼šå˜å¾—å¤æ‚ï¼ŒRedux è®©çŠ¶æ€å˜æ›´å¯æ§ï¼Œä»£ç æ›´æ˜“ç»´æŠ¤ã€‚

---

### äºŒã€Redux ä¸»è¦æ¦‚å¿µ

Redux ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆï¼š

1. **Storeï¼ˆå­˜å‚¨ï¼‰**ï¼š
    - ç»Ÿä¸€å­˜å‚¨åº”ç”¨çŠ¶æ€ï¼ˆå…¨å±€å”¯ä¸€ï¼‰ã€‚
2. **Actionï¼ˆåŠ¨ä½œï¼‰**ï¼š
    - æ˜¯ä¸€ä¸ª **æ™®é€šçš„ JavaScript å¯¹è±¡**ï¼Œæè¿°**çŠ¶æ€å˜åŒ–çš„æ„å›¾**ã€‚
    - ä¾‹å¦‚ï¼š
```js
{ type: "INCREMENT", payload: 1 }
```
        
3. **Reducerï¼ˆçŠ¶æ€æ›´æ–°é€»è¾‘ï¼‰**ï¼š
    - è´Ÿè´£æ¥æ”¶ `state` å’Œ `action`ï¼Œ**è¿”å›æ–°çš„ state**ï¼ˆçº¯å‡½æ•°ï¼‰ã€‚
    - ä¾‹å¦‚ï¼š
```js
function counterReducer(state = 0, action) {
  switch (action.type) {
    case "INCREMENT":
      return state + action.payload;
    case "DECREMENT":
      return state - action.payload;
    default:
      return state;
  }
}
```
        
4. **Dispatchï¼ˆåˆ†å‘ï¼‰**ï¼š
    - è§¦å‘ `action`ï¼Œé€šçŸ¥ `store` è¿›è¡ŒçŠ¶æ€æ›´æ–°ï¼š
```js
store.dispatch({ type: "INCREMENT", payload: 1 });
```

5. **Subscriberï¼ˆè®¢é˜…è€…ï¼‰**ï¼š
    - ç»„ä»¶å¯ä»¥è®¢é˜… `store`ï¼Œå½“ `store` å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ã€‚

---

### ä¸‰ã€Redux é€‚ç”¨åœºæ™¯

Redux é€‚ç”¨äº **å¤§å‹åº”ç”¨**ï¼Œå°¤å…¶æ˜¯çŠ¶æ€å…±äº«å¤æ‚ã€çŠ¶æ€ç®¡ç†å›°éš¾çš„åœºæ™¯ï¼š 
âœ… éœ€è¦åœ¨å¤šä¸ªç»„ä»¶é—´ **å…±äº«çŠ¶æ€**ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ç­‰ï¼‰ã€‚  
âœ… éœ€è¦ **å¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç†**ï¼ˆå¦‚å¼‚æ­¥æ•°æ®è¯·æ±‚çš„çŠ¶æ€ï¼‰ã€‚  
âœ… éœ€è¦ **é«˜æ•ˆçš„è°ƒè¯•èƒ½åŠ›**ï¼ˆå¦‚ Redux DevTools è·Ÿè¸ªçŠ¶æ€å˜åŒ–ï¼‰ã€‚

å¦‚æœåº”ç”¨è¾ƒå°ï¼Œä½¿ç”¨ `useState` + `useContext` å¯èƒ½æ›´è½»é‡çº§ï¼Œæ— éœ€ Reduxã€‚

---

### **å››ã€æ€»ç»“**

- **Redux æ˜¯ä¸€ä¸ªå…¨å±€çŠ¶æ€ç®¡ç†å·¥å…·**ï¼Œç”¨äºè§£å†³ React ç»„ä»¶é—´ **çŠ¶æ€å…±äº«å¤æ‚ã€çŠ¶æ€ç®¡ç†æ··ä¹±ã€å¯é¢„æµ‹æ€§å·®ã€è°ƒè¯•å›°éš¾** ç­‰é—®é¢˜ã€‚
- **æ ¸å¿ƒåŸåˆ™**ï¼š
    1. **å•ä¸€æ•°æ®æº**ï¼ˆæ‰€æœ‰çŠ¶æ€é›†ä¸­å­˜å‚¨åœ¨ `store`ï¼‰ã€‚
    2. **çŠ¶æ€åªè¯»**ï¼ˆä¸èƒ½ç›´æ¥ä¿®æ”¹ stateï¼Œå¿…é¡»é€šè¿‡ `action`ï¼‰ã€‚
    3. **ä½¿ç”¨çº¯å‡½æ•°æ›´æ–° state**ï¼ˆ`reducer` è´Ÿè´£ state æ›´æ–°ï¼Œä¿è¯æ•°æ®å¯é¢„æµ‹ï¼‰ã€‚
- **é€‚ç”¨äº** **å¤§å‹åº”ç”¨**ï¼Œå¦‚æœåº”ç”¨è¾ƒå°ï¼Œ`useState` å’Œ `useContext` å¯èƒ½å·²ç»è¶³å¤Ÿã€‚

ğŸš€ **æ€»ä¹‹ï¼ŒRedux è®©çŠ¶æ€ç®¡ç†æ›´æ¸…æ™°ã€å¯é¢„æµ‹ã€å¯è°ƒè¯•ï¼Œåœ¨å¤§å‹ React åº”ç”¨ä¸­æå…·ä»·å€¼ï¼**

## 2. Redux åŸç†åŠå·¥ä½œæµç¨‹


Redux æ˜¯ä¸€ä¸ª**å¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç†**å·¥å…·ï¼Œéµå¾ª **Flux æ¶æ„**ï¼Œæ ¸å¿ƒæ˜¯**å•å‘æ•°æ®æµ**ï¼Œä½¿çŠ¶æ€å˜åŒ–å¯æ§ã€å¯è¿½è¸ªã€‚Redux ä¸»è¦ç”± **Storeã€Actionã€Reducerã€Dispatchã€Subscribe** ç»„æˆã€‚

---

### 1. Redux å·¥ä½œæµç¨‹

Redux çš„æ•°æ®æµæ˜¯**å•å‘çš„**ï¼Œæ•´ä¸ªå·¥ä½œæµç¨‹å¯ä»¥æ‹†åˆ†ä¸ºä»¥ä¸‹ 5 ä¸ªæ­¥éª¤ï¼š

#### ï¼ˆ1ï¼‰ç»„ä»¶è§¦å‘ `dispatch(action)`

- ç»„ä»¶è°ƒç”¨ `dispatch()` è§¦å‘ **Action**ï¼Œè¡¨ç¤ºâ€œ**è¦æ‰§è¡ŒæŸç§çŠ¶æ€å˜æ›´**â€ã€‚
- ä¾‹å¦‚ï¼š
 ```js
 dispatch({ type: "INCREMENT", payload: 1 });
 ```
 
 - è¿™é‡Œ `type` è¡¨ç¤ºåŠ¨ä½œç±»å‹ï¼ˆå¿…é¡»ï¼‰ã€‚
 - `payload` å¯é€‰ï¼Œè¡¨ç¤ºé™„å¸¦çš„æ•°æ®ã€‚

---

#### ï¼ˆ2ï¼‰`Action` è¢« `Reducer` å¤„ç†

- `Reducer` æ˜¯ä¸€ä¸ª**çº¯å‡½æ•°**ï¼Œæ¥æ”¶ `state` å’Œ `action`ï¼Œè¿”å›**æ–°çš„ state**ï¼š
 ```js
 function counterReducer(state = { count: 0 }, action) {
   switch (action.type) {
     case "INCREMENT":
       return { count: state.count + action.payload };
     case "DECREMENT":
       return { count: state.count - action.payload };
     default:
       return state; // å…¶ä»–æƒ…å†µè¿”å›åŸ state
   }
 }
 ```
 
- `Reducer` **ä¸èƒ½ç›´æ¥ä¿®æ”¹ `state`**ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ `state`ã€‚

---

#### ï¼ˆ3ï¼‰Redux `Store` æ›´æ–° `state`

- `store` é€šè¿‡ `createStore(reducer)` åˆ›å»ºï¼Œè´Ÿè´£å­˜å‚¨ `state`ï¼š
```js
import { createStore } from "redux";
const store = createStore(counterReducer);
```
- å½“ `Reducer` è®¡ç®—å‡ºæ–°çš„ `state` åï¼Œ`store` ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

---

#### ï¼ˆ4ï¼‰ç»„ä»¶è®¢é˜… `store` è·å–æœ€æ–° `state`

- ç»„ä»¶å¯ä»¥**è®¢é˜… `store`**ï¼Œå½“ `state` å˜åŒ–æ—¶ï¼Œç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“ï¼š

```js
store.subscribe(() => {
  console.log("State æ›´æ–°:", store.getState());
});
```

- åœ¨ React ç»„ä»¶ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ `useSelector` è·å– Redux çŠ¶æ€ï¼š
```js
import { useSelector } from "react-redux";

function Counter() {
  const count = useSelector((state) => state.count);
  return <div>Count: {count}</div>;
}
```

---

#### ï¼ˆ5ï¼‰React ç»„ä»¶æ¸²æŸ“æ›´æ–°

- `store` å‘ç”Ÿå˜åŒ–åï¼ŒReact ç»„ä»¶ä¼š**è‡ªåŠ¨é‡æ–°æ¸²æŸ“**ï¼Œå±•ç¤ºæœ€æ–°çš„ `state`ã€‚

---

### 2. Redux å·¥ä½œåŸç†æ€»ç»“

1. **ç»„ä»¶è°ƒç”¨ `dispatch(action)`** è§¦å‘çŠ¶æ€æ›´æ–°ã€‚
2. **`action` è¢« `reducer` å¤„ç†**ï¼Œç”Ÿæˆæ–°çš„ `state`ã€‚
3. **`store` æ›´æ–° `state`** å¹¶é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…ï¼ˆç»„ä»¶ï¼‰ã€‚
4. **ç»„ä»¶é‡æ–°æ¸²æŸ“**ï¼Œæ˜¾ç¤ºæœ€æ–° `state`ã€‚

ğŸ“Œ **Redux çš„æ ¸å¿ƒæ€æƒ³**ï¼š

- **å•å‘æ•°æ®æµ**ï¼ˆstate åªé€šè¿‡ `action â†’ reducer â†’ store â†’ UI` æ›´æ–°ï¼‰ã€‚
- **çŠ¶æ€é›†ä¸­å­˜å‚¨**ï¼ˆæ‰€æœ‰çŠ¶æ€å­˜å‚¨åœ¨ `store`ï¼‰ã€‚
- **çº¯å‡½æ•° reducer**ï¼ˆä¿è¯çŠ¶æ€å˜åŒ–å¯é¢„æµ‹ï¼‰ã€‚
- **ç»„ä»¶ä¸ `state` è§£è€¦**ï¼ˆé¿å… `props` ä¼ é€’åœ°ç‹±ï¼‰ã€‚

---

### 3. Redux å®Œæ•´ä»£ç ç¤ºä¾‹

```js
import { createStore } from "redux";

// 1ï¸âƒ£ å®šä¹‰ Reducerï¼ˆå¤„ç†çŠ¶æ€å˜æ›´ï¼‰
function counterReducer(state = { count: 0 }, action) {
  switch (action.type) {
    case "INCREMENT":
      return { count: state.count + action.payload };
    case "DECREMENT":
      return { count: state.count - action.payload };
    default:
      return state;
  }
}

// 2ï¸âƒ£ åˆ›å»º Redux Store
const store = createStore(counterReducer);

// 3ï¸âƒ£ ç›‘å¬ state å˜åŒ–
store.subscribe(() => console.log("å½“å‰ state:", store.getState()));

// 4ï¸âƒ£ è§¦å‘ Actionï¼ˆä¿®æ”¹çŠ¶æ€ï¼‰
store.dispatch({ type: "INCREMENT", payload: 1 });
store.dispatch({ type: "INCREMENT", payload: 2 });
store.dispatch({ type: "DECREMENT", payload: 1 });
```

âœ… **è¾“å‡º**ï¼š

```
å½“å‰ state: { count: 1 }
å½“å‰ state: { count: 3 }
å½“å‰ state: { count: 2 }
```

---

### 4. Redux ä¸ React ç»“åˆ

åœ¨ React åº”ç”¨ä¸­ï¼ŒRedux é€šè¿‡ `react-redux` è¿æ¥ç»„ä»¶ä¸ `store`ï¼š

#### ï¼ˆ1ï¼‰æä¾› `store` ç»™æ•´ä¸ªåº”ç”¨

```jsx
import { Provider } from "react-redux";
import { createStore } from "redux";
import counterReducer from "./reducers/counterReducer";
import App from "./App";

const store = createStore(counterReducer);

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById("root")
);
```

---

#### ï¼ˆ2ï¼‰ç»„ä»¶ä½¿ç”¨ Redux çŠ¶æ€

```jsx
import { useSelector, useDispatch } from "react-redux";

function Counter() {
  const count = useSelector((state) => state.count);
  const dispatch = useDispatch();

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => dispatch({ type: "INCREMENT", payload: 1 })}>
        +1
      </button>
      <button onClick={() => dispatch({ type: "DECREMENT", payload: 1 })}>
        -1
      </button>
    </div>
  );
}
```

### æ€»ç»“

ğŸ¯ **Redux å·¥ä½œæµç¨‹**ï¼š

1. ç»„ä»¶ `dispatch(action)` å‘èµ·çŠ¶æ€æ›´æ–°ã€‚
2. `action` äº¤ç»™ `reducer` å¤„ç†ï¼Œç”Ÿæˆæ–° `state`ã€‚
3. `store` æ›´æ–° `state` å¹¶é€šçŸ¥ç»„ä»¶ã€‚
4. ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ˜¾ç¤ºæœ€æ–°æ•°æ®ã€‚

ğŸš€ **Redux é€‚ç”¨äº**ï¼š

- å¤æ‚åº”ç”¨çŠ¶æ€ç®¡ç†ï¼ˆå¦‚å…¨å±€æ•°æ®å…±äº«ï¼‰ã€‚
- éœ€è¦å¯é¢„æµ‹çš„çŠ¶æ€æ›´æ–°ï¼ˆé¿å… `props drilling`ï¼‰ã€‚
- éœ€è¦**è°ƒè¯•å’Œå›æº¯èƒ½åŠ›**ï¼ˆRedux DevToolsï¼‰ã€‚

âœ… å¦‚æœé¡¹ç›®è¾ƒå°ï¼Œ`useState` å’Œ `useContext` å¯èƒ½æ›´åˆé€‚ï¼Œè€Œ Redux é€‚ç”¨äº**å¤æ‚çŠ¶æ€ç®¡ç†**çš„åº”ç”¨ã€‚

## 3. Redux ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†

### Redux ä¸­å¼‚æ­¥è¯·æ±‚çš„å¤„ç†

Redux **æœ¬èº«æ˜¯åŒæ­¥çš„**ï¼Œä¸èƒ½ç›´æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼ˆå¦‚ API è¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ç­‰ï¼‰ã€‚å› æ­¤ï¼Œéœ€è¦ **ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰** æ¥æ‰©å±• Reduxï¼Œä½¿å…¶èƒ½å¤Ÿæ”¯æŒå¼‚æ­¥é€»è¾‘ã€‚

åœ¨ Redux ä¸­ï¼Œå¸¸è§çš„å¤„ç†å¼‚æ­¥è¯·æ±‚çš„æ–¹æ³•æœ‰ï¼š

1. **Redux Thunk**ï¼ˆæœ€å¸¸ç”¨ï¼ŒåŸºäºå‡½æ•°çš„ä¸­é—´ä»¶ï¼‰
2. **Redux Saga**ï¼ˆåŸºäº Generator å‡½æ•°ï¼Œæ›´é€‚ç”¨äºå¤æ‚å¼‚æ­¥æµç¨‹ï¼‰
3. **Redux Toolkitï¼ˆRTKï¼‰çš„ createAsyncThunk**ï¼ˆç®€åŒ–å¼‚æ­¥é€»è¾‘ï¼‰

---

### 1. Redux Thunkï¼ˆæœ€å¸¸ç”¨ï¼‰

#### ğŸ”¹ Redux Thunk æ˜¯ä»€ä¹ˆï¼Ÿ

- **Redux é»˜è®¤ `dispatch(action)` åªèƒ½æ¥æ”¶å¯¹è±¡**ï¼Œè€Œ **Thunk å…è®¸ `dispatch` æ¥æ”¶å‡½æ•°**ã€‚
- **Thunk å…è®¸æˆ‘ä»¬åœ¨ `dispatch` ä¸­å†™å¼‚æ­¥ä»£ç **ï¼ˆå¦‚ `fetch` è¯·æ±‚ï¼‰ï¼Œç„¶åæ‰‹åŠ¨ `dispatch` ç»“æœã€‚

#### **ğŸ“Œ ä½¿ç”¨ Redux Thunk å¤„ç†å¼‚æ­¥è¯·æ±‚**

##### (1) å®‰è£… Redux Thunk

```sh
npm install redux-thunk
```

##### (2) åœ¨ Redux `store` ä¸­ä½¿ç”¨ `applyMiddleware`

```js
import { createStore, applyMiddleware } from "redux";
import thunk from "redux-thunk";
import rootReducer from "./reducers";

// åˆ›å»º Redux Storeï¼Œå¹¶æ·»åŠ  Thunk ä¸­é—´ä»¶
const store = createStore(rootReducer, applyMiddleware(thunk));

export default store;
```

##### (3) å®šä¹‰å¼‚æ­¥ `action`

```js
// actions/userActions.js
export const fetchUser = () => {
  return async (dispatch) => {
    dispatch({ type: "FETCH_USER_REQUEST" });

    try {
      const response = await fetch("https://jsonplaceholder.typicode.com/users/1");
      const data = await response.json();
      dispatch({ type: "FETCH_USER_SUCCESS", payload: data });
    } catch (error) {
      dispatch({ type: "FETCH_USER_FAILURE", error: error.message });
    }
  };
};
```

- `dispatch({ type: "FETCH_USER_REQUEST" })` â†’ å¼€å§‹è¯·æ±‚ï¼ˆå¯ç”¨äº loadingï¼‰
- `dispatch({ type: "FETCH_USER_SUCCESS", payload: data })` â†’ è¯·æ±‚æˆåŠŸï¼Œå­˜å‚¨æ•°æ®
- `dispatch({ type: "FETCH_USER_FAILURE", error })` â†’ è¯·æ±‚å¤±è´¥ï¼Œå­˜å‚¨é”™è¯¯ä¿¡æ¯

##### (4) å®šä¹‰ `Reducer` å¤„ç†å¼‚æ­¥çŠ¶æ€

```js
// reducers/userReducer.js
const initialState = {
  user: null,
  loading: false,
  error: null,
};

const userReducer = (state = initialState, action) => {
  switch (action.type) {
    case "FETCH_USER_REQUEST":
      return { ...state, loading: true, error: null };
    case "FETCH_USER_SUCCESS":
      return { ...state, loading: false, user: action.payload };
    case "FETCH_USER_FAILURE":
      return { ...state, loading: false, error: action.error };
    default:
      return state;
  }
};

export default userReducer;
```

##### (5) åœ¨ç»„ä»¶ä¸­è°ƒç”¨ `dispatch(fetchUser())`

```js
import React, { useEffect } from "react";
import { useDispatch, useSelector } from "react-redux";
import { fetchUser } from "./actions/userActions";

function UserProfile() {
  const dispatch = useDispatch();
  const { user, loading, error } = useSelector((state) => state.user);

  useEffect(() => {
    dispatch(fetchUser());
  }, [dispatch]);

  if (loading) return <p>Loading...</p>;
  if (error) return <p>Error: {error}</p>;
  return <div>User: {user?.name}</div>;
}

export default UserProfile;
```

#### âœ… Redux Thunk é€‚ç”¨åœºæ™¯

- **ç®€å•å¼‚æ­¥è¯·æ±‚**ï¼ˆå¦‚ `fetch` è·å–æ•°æ®ï¼‰
- **å¼‚æ­¥è¯·æ±‚ä¾èµ– Redux `dispatch`**ï¼ˆå¦‚è§¦å‘å¤šä¸ª `action`ï¼‰

---

### 2. Redux Sagaï¼ˆé€‚ç”¨äºå¤æ‚å¼‚æ­¥æµï¼‰

Redux Saga ä½¿ç”¨ **ES6 Generator å‡½æ•°** å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œå®ƒä¸ Redux Thunk çš„ä¸»è¦åŒºåˆ«ï¼š 
âœ… **Saga å¯ç®¡ç†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡**ï¼Œé€‚ç”¨äº**å¤æ‚ä¸šåŠ¡é€»è¾‘**ï¼ˆå¦‚ WebSocketã€è½®è¯¢ã€ä»»åŠ¡é˜Ÿåˆ—ï¼‰  
âœ… **æ”¯æŒå‰¯ä½œç”¨æ§åˆ¶**ï¼ˆå¦‚ `takeLatest`ã€`takeEvery` æ§åˆ¶å¼‚æ­¥æ‰§è¡Œæ¬¡æ•°ï¼‰  
âœ… **æ”¯æŒä»»åŠ¡å–æ¶ˆï¼ˆcancelï¼‰**ï¼Œæ¯” Thunk æ›´çµæ´»

#### ğŸ“Œ ä½¿ç”¨ Redux Saga å¤„ç†å¼‚æ­¥è¯·æ±‚

##### (1) å®‰è£… Redux Saga

```sh
npm install redux-saga
```

##### (2) åˆ›å»º `saga` å¤„ç†å¼‚æ­¥è¯·æ±‚

```js
// sagas/userSaga.js
import { call, put, takeEvery } from "redux-saga/effects";

// æ¨¡æ‹Ÿ API è¯·æ±‚
const fetchUserApi = async () => {
  const response = await fetch("https://jsonplaceholder.typicode.com/users/1");
  return response.json();
};

// Saga å¼‚æ­¥å¤„ç†å‡½æ•°
function* fetchUserSaga() {
  try {
    yield put({ type: "FETCH_USER_REQUEST" });
    const user = yield call(fetchUserApi);
    yield put({ type: "FETCH_USER_SUCCESS", payload: user });
  } catch (error) {
    yield put({ type: "FETCH_USER_FAILURE", error: error.message });
  }
}

// ç›‘å¬ `FETCH_USER` actionï¼Œè§¦å‘ `fetchUserSaga`
export function* watchFetchUser() {
  yield takeEvery("FETCH_USER", fetchUserSaga);
}
```

##### (3) é…ç½® `Redux Store` ä½¿ç”¨ `Saga Middleware`

```js
import { createStore, applyMiddleware } from "redux";
import createSagaMiddleware from "redux-saga";
import userReducer from "./reducers/userReducer";
import { watchFetchUser } from "./sagas/userSaga";

// åˆ›å»º Saga Middleware
const sagaMiddleware = createSagaMiddleware();

// åˆ›å»º Redux Store
const store = createStore(userReducer, applyMiddleware(sagaMiddleware));

// è¿è¡Œ Saga
sagaMiddleware.run(watchFetchUser);

export default store;
```

##### (4) åœ¨ç»„ä»¶ä¸­è°ƒç”¨ `dispatch({ type: "FETCH_USER" })`

```js
import React, { useEffect } from "react";
import { useDispatch, useSelector } from "react-redux";

function UserProfile() {
  const dispatch = useDispatch();
  const { user, loading, error } = useSelector((state) => state.user);

  useEffect(() => {
    dispatch({ type: "FETCH_USER" }); // è§¦å‘ Saga å¤„ç†å¼‚æ­¥è¯·æ±‚
  }, [dispatch]);

  if (loading) return <p>Loading...</p>;
  if (error) return <p>Error: {error}</p>;
  return <div>User: {user?.name}</div>;
}

export default UserProfile;
```

#### âœ… Redux Saga é€‚ç”¨åœºæ™¯

- é€‚ç”¨äº **å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ˆWebSocketã€è½®è¯¢ã€ä»»åŠ¡é˜Ÿåˆ—ï¼‰**
- éœ€è¦ **ç®¡ç†å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼ˆtakeLatestã€takeEveryï¼‰**
- éœ€è¦ **ä»»åŠ¡å–æ¶ˆï¼ˆå¦‚ç”¨æˆ·åˆ‡æ¢é¡µé¢æ—¶ç»ˆæ­¢è¯·æ±‚ï¼‰**

---

### 3. Redux Toolkitï¼ˆRTKï¼‰çš„ `createAsyncThunk`ï¼ˆç®€åŒ– Thunk è¯­æ³•ï¼‰

Redux Toolkit (RTK) æä¾›äº† `createAsyncThunk`ï¼Œè®©å¼‚æ­¥ Redux ä»£ç æ›´ç®€æ´ã€‚

#### ğŸ“Œ ä½¿ç”¨ `createAsyncThunk` å¤„ç†å¼‚æ­¥è¯·æ±‚

```js
import { createSlice, createAsyncThunk } from "@reduxjs/toolkit";

// å®šä¹‰å¼‚æ­¥è¯·æ±‚ action
export const fetchUser = createAsyncThunk("user/fetchUser", async () => {
  const response = await fetch("https://jsonplaceholder.typicode.com/users/1");
  return response.json();
});

// åˆ›å»º Redux Slice
const userSlice = createSlice({
  name: "user",
  initialState: { user: null, loading: false, error: null },
  reducers: {},
  extraReducers: (builder) => {
    builder
      .addCase(fetchUser.pending, (state) => { state.loading = true; })
      .addCase(fetchUser.fulfilled, (state, action) => {
        state.loading = false;
        state.user = action.payload;
      })
      .addCase(fetchUser.rejected, (state, action) => {
        state.loading = false;
        state.error = action.error.message;
      });
  },
});

export default userSlice.reducer;
```

âœ… **RTK é€‚åˆ Redux æ–°æ‰‹**ï¼Œæ›´ç®€å•ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç† action ç±»å‹ï¼

---

### æ€»ç»“

|æ–¹æ³•|é€‚ç”¨åœºæ™¯|
|---|---|
|**Redux Thunk**|ç®€å•å¼‚æ­¥è¯·æ±‚ï¼Œå¦‚ `fetch`|
|**Redux Saga**|å¤æ‚å¼‚æ­¥ä»»åŠ¡ï¼ˆWebSocketã€ä»»åŠ¡é˜Ÿåˆ—ï¼‰|
|**RTK `createAsyncThunk`**|æ¨èï¼æ›´ç®€æ´çš„ Thunk æ–¹å¼|

ğŸš€ **å¦‚æœæ˜¯ Redux æ–°æ‰‹ï¼Œæ¨èä½¿ç”¨ `RTK + createAsyncThunk`ï¼**`

## 4. Redux æ€ä¹ˆå®ç°å±æ€§ä¼ é€’ï¼Œä»‹ç»ä¸‹åŸç†

Redux å®ç°å±æ€§ä¼ é€’çš„æ ¸å¿ƒæ€è·¯æ˜¯é€šè¿‡ä¸€ä¸ªå…¨å±€çš„çŠ¶æ€å­˜å‚¨ï¼ˆStoreï¼‰æ¥é›†ä¸­ç®¡ç†åº”ç”¨çš„çŠ¶æ€ï¼Œå†åˆ©ç”¨ React çš„ Context æœºåˆ¶å’Œè®¢é˜…æ¨¡å¼ï¼Œè®©ç»„ä»¶èƒ½å¤Ÿç›´æ¥ä» Store ä¸­è·å–éœ€è¦çš„æ•°æ®ï¼Œè€Œæ— éœ€é€šè¿‡çˆ¶å­ç»„ä»¶å±‚å±‚ä¼ é€’ propsã€‚è¿™ç§æœºåˆ¶è§£å†³äº†â€œprops drillingâ€ï¼ˆå±æ€§å±‚å±‚ä¼ é€’ï¼‰çš„é—®é¢˜ï¼Œç®€åŒ–äº†ç»„ä»¶é—´çš„æ•°æ®å…±äº«ã€‚

ä¸‹é¢è¯¦ç»†ä»‹ç»å…¶åŸç†å’Œå·¥ä½œæœºåˆ¶ï¼š

---

### 1. **å…¨å±€ Store ä¸ Provider**

- **Store**  
    Redux çš„æ‰€æœ‰çŠ¶æ€éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ Store ä¸­ï¼Œæˆä¸ºå•ä¸€æ•°æ®æºï¼ˆSingle Source of Truthï¼‰ã€‚
    
- **Provider ç»„ä»¶**  
    React-Redux åº“æä¾›çš„ `Provider` ç»„ä»¶ä¼šå°† Store æ”¾åˆ° React çš„ Context ä¸­ï¼Œè¿™æ ·ç»„ä»¶æ ‘ä¸­ä»»ä½•åä»£ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡ Context è®¿é—®åˆ°è¿™ä¸ª Storeã€‚
    
    ```jsx
    import React from 'react';
    import ReactDOM from 'react-dom';
    import { Provider } from 'react-redux';
    import store from './store';
    import App from './App';
    
    ReactDOM.render(
      <Provider store={store}>
        <App />
      </Provider>,
      document.getElementById('root')
    );
    ```
    

---

### 2. **ç»„ä»¶ä¸ Store çš„è¿æ¥**

ç»„ä»¶é€šè¿‡ä¸¤ç§æ–¹å¼ä» Redux Store è·å–æ•°æ®ï¼š

- **é«˜é˜¶ç»„ä»¶ `connect`**  
    `connect` æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒåˆ©ç”¨ Context å°† Store ä¼ é€’ç»™è¢«åŒ…è£…çš„ç»„ä»¶ï¼ŒåŒæ—¶å…è®¸å¼€å‘è€…å®šä¹‰ `mapStateToProps` å‡½æ•°ï¼Œå†³å®šå“ªäº›çŠ¶æ€æ•°æ®éœ€è¦ä½œä¸º props æ³¨å…¥ç»„ä»¶ä¸­ã€‚
    
    ```jsx
    import React from 'react';
    import { connect } from 'react-redux';
    
    const mapStateToProps = (state) => ({
      count: state.count,
    });
    
    function Counter({ count }) {
      return <h1>Count: {count}</h1>;
    }
    
    export default connect(mapStateToProps)(Counter);
    ```
    
- **Hook `useSelector`**  
    å¯¹äºå‡½æ•°ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ `useSelector` Hook ç›´æ¥ä» Redux Store ä¸­è¯»å–æ•°æ®ã€‚å®ƒåŒæ ·ä¼šåˆ©ç”¨ Context è®¿é—® Provider æä¾›çš„ Storeï¼Œå¹¶æ ¹æ®ä¼ å…¥çš„é€‰æ‹©å™¨å‡½æ•°è¿”å›éœ€è¦çš„çŠ¶æ€æ•°æ®ã€‚
    
    ```jsx
    import React from 'react';
    import { useSelector } from 'react-redux';
    
    function Counter() {
      const count = useSelector(state => state.count);
      return <h1>Count: {count}</h1>;
    }
    ```
    

---

### 3. **çŠ¶æ€æ›´æ–°ä¸è®¢é˜…æœºåˆ¶**

- å½“åº”ç”¨ä¸­é€šè¿‡ `dispatch` è§¦å‘äº†ä¸€ä¸ª Action åï¼ŒStore ä¼šè°ƒç”¨ç›¸åº”çš„ Reducer æ¥è®¡ç®—æ–°çš„çŠ¶æ€ã€‚
- Store å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªè®¢é˜…åˆ—è¡¨ï¼Œå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒStore ä¼šé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…ã€‚
- é€šè¿‡ `connect` æˆ– `useSelector` è·å–æ•°æ®çš„ç»„ä»¶ä¼šè‡ªåŠ¨è®¢é˜… Store çš„æ›´æ–°ã€‚å½“å®ƒä»¬æ£€æµ‹åˆ°ç›¸å…³çŠ¶æ€çš„å˜åŒ–æ—¶ï¼Œä¼šé‡æ–°è®¡ç®— props æˆ–é€‰æ‹©çš„æ•°æ®ï¼Œå¹¶è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä»è€Œå®ç°å±æ€§ä¼ é€’çš„æ›´æ–°ã€‚

---

### 4. **æ€»ç»“**

Redux é€šè¿‡ä»¥ä¸‹æœºåˆ¶å®ç°å±æ€§ä¼ é€’ï¼š

1. **å…¨å±€ Store**ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰åº”ç”¨çŠ¶æ€ã€‚
2. **Provider ä¸ Context**ï¼šå°† Store ä¼ é€’ç»™æ•´ä¸ªç»„ä»¶æ ‘ï¼Œé¿å…æ‰‹åŠ¨å±‚å±‚ä¼ é€’ propsã€‚
3. **connect/useSelector**ï¼šç»„ä»¶é€šè¿‡è¿™ä¸¤ç§æ–¹å¼ç›´æ¥ä» Store è·å–æ‰€éœ€æ•°æ®ï¼Œå¹¶å°†è¿™äº›æ•°æ®ä½œä¸º props ä½¿ç”¨ã€‚
4. **è®¢é˜…æœºåˆ¶**ï¼šå½“ Store æ›´æ–°æ—¶ï¼Œæ‰€æœ‰ä½¿ç”¨è¿™äº›æ•°æ®çš„ç»„ä»¶éƒ½ä¼šè‡ªåŠ¨æ¥æ”¶æœ€æ–°çŠ¶æ€å¹¶æ›´æ–°è§†å›¾ã€‚

è¿™ç§è®¾è®¡ä½¿å¾—ç»„ä»¶ä¸éœ€è¦ä¾èµ–çˆ¶ç»„ä»¶ä¼ é€’ propsï¼Œè€Œæ˜¯èƒ½å¤Ÿç‹¬ç«‹ã€ç›´æ¥åœ°è®¿é—®å…¨å±€çŠ¶æ€ï¼Œæå¤§åœ°ç®€åŒ–äº†çŠ¶æ€ç®¡ç†å’Œç»„ä»¶é€šä¿¡ã€‚

## 5. Redux ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¥å—å‡ ä¸ªå‚æ•°ï¼ŸæŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ

Redux ä¸­é—´ä»¶æ˜¯ä¸€ç§ç”¨äºæ‰©å±• Redux `dispatch` åŠŸèƒ½çš„é«˜çº§æœºåˆ¶ï¼Œå®ƒå¯ä»¥æ‹¦æˆªã€ä¿®æ”¹ã€å»¶è¿Ÿæˆ–è®°å½• actionï¼Œç„¶åå†å°†å®ƒä»¬ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–æœ€ç»ˆçš„ reducerã€‚ä¸­é—´ä»¶è®©ä½ åœ¨ action åˆ†å‘å’Œåˆ°è¾¾ reducer ä¹‹å‰æ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œä»è€Œå®ç°æ—¥å¿—è®°å½•ã€é”™è¯¯æŠ¥å‘Šã€å¼‚æ­¥æ“ä½œï¼ˆå¦‚ Redux Thunkã€Redux Sagaï¼‰ç­‰åŠŸèƒ½ã€‚

---

### Redux ä¸­é—´ä»¶çš„åŸºæœ¬ç»“æ„

Redux ä¸­é—´ä»¶çš„åŸºæœ¬å†™æ³•ä½¿ç”¨äº†æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ï¼Œå…¶æ ‡å‡†ç­¾åä¸ºï¼š

```js
const middleware = store => next => action => {
  // è¿™é‡Œå¯ä»¥æ·»åŠ å¤„ç†é€»è¾‘
  return next(action); // ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–æœ€ç»ˆçš„ dispatch
};
```

---

### ä¸­é—´ä»¶æ¥å—çš„å‚æ•°

Redux ä¸­é—´ä»¶ç»è¿‡æŸ¯é‡ŒåŒ–åï¼Œå…±æœ‰ä¸‰ä¸ªå±‚çº§ï¼Œæ¯ä¸€å±‚æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š

1. **ç¬¬ä¸€å±‚ï¼š`store` å¯¹è±¡**
    
    - **å‚æ•°å†…å®¹**ï¼šè¿™ä¸ª `store` å¯¹è±¡é€šå¸¸åŒ…å« `dispatch` å’Œ `getState` æ–¹æ³•ã€‚
    - **ä½œç”¨**ï¼šå…è®¸ä¸­é—´ä»¶è®¿é—®å½“å‰çš„ Redux çŠ¶æ€ï¼ˆé€šè¿‡ `getState`ï¼‰ä»¥åŠåœ¨å¿…è¦æ—¶é‡æ–°åˆ†å‘ actionï¼ˆé€šè¿‡ `dispatch`ï¼‰ã€‚
2. **ç¬¬äºŒå±‚ï¼š`next` å‡½æ•°**
    
    - **å‚æ•°å†…å®¹**ï¼š`next` æ˜¯ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„ `dispatch` å‡½æ•°ï¼Œæˆ–è€…å¦‚æœå½“å‰ä¸­é—´ä»¶æ˜¯æœ€åä¸€ä¸ªï¼Œåˆ™æ˜¯ Redux åŸç”Ÿçš„ `dispatch` å‡½æ•°ã€‚
    - **ä½œç”¨**ï¼šé€šè¿‡è°ƒç”¨ `next(action)`ï¼Œä¸­é—´ä»¶å°† action ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–æœ€ç»ˆçš„ reducerã€‚
3. **ç¬¬ä¸‰å±‚ï¼š`action` å¯¹è±¡**
    
    - **å‚æ•°å†…å®¹**ï¼šè¢«åˆ†å‘çš„ action å¯¹è±¡ï¼Œå³æè¿°â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€çš„çº¯å¯¹è±¡ï¼ˆé€šå¸¸åŒ…å« `type` å­—æ®µï¼‰ã€‚
    - **ä½œç”¨**ï¼šè¿™æ˜¯ä¸­é—´ä»¶éœ€è¦å¤„ç†æˆ–æ£€æŸ¥çš„å®é™…æ•°æ®ï¼Œæ ¹æ® action çš„å†…å®¹å¯ä»¥è¿›è¡Œæ‹¦æˆªã€ä¿®æ”¹ã€å¼‚æ­¥å¤„ç†ç­‰æ“ä½œã€‚

---

### æŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°æ€»ç»“

- **å·¦ä¾§å‚æ•°ï¼ˆç¬¬ä¸€å±‚å‚æ•°ï¼‰**ï¼š`store` å¯¹è±¡  
    æä¾›äº† `dispatch` å’Œ `getState` æ–¹æ³•ï¼Œä½¿ä¸­é—´ä»¶èƒ½å¤Ÿè®¿é—®æˆ–æ“ä½œå…¨å±€çŠ¶æ€ã€‚
    
- **å³ä¾§å‚æ•°ï¼ˆç¬¬ä¸‰å±‚å‚æ•°ï¼‰**ï¼š`action` å¯¹è±¡  
    è¿™æ˜¯å®é™…ä¼ é€’çš„ actionï¼ŒåŒ…å«äº†æè¿°è¡Œä¸ºçš„å¿…è¦ä¿¡æ¯ï¼Œä¸­é—´ä»¶å¯ä»¥åŸºäºå®ƒæ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚
    
- **ä¸­é—´å±‚å‚æ•°ï¼ˆç¬¬äºŒå±‚å‚æ•°ï¼‰**ï¼š`next` å‡½æ•°  
    å®ƒæ˜¯è¿æ¥å„ä¸ªä¸­é—´ä»¶çš„æ¡¥æ¢ï¼Œè´Ÿè´£æŠŠ action ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–æœ€ç»ˆçš„ Redux `dispatch`ã€‚
    

---

### ç¤ºä¾‹è¯´æ˜

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¸­é—´ä»¶ç¤ºä¾‹ï¼Œç”¨äºè®°å½•æ¯ä¸ª action è¢«åˆ†å‘æ—¶çš„æ—¥å¿—ï¼š

```js
const loggerMiddleware = store => next => action => {
  console.log('Dispatching:', action);      // ç¬¬ä¸€å±‚ä½¿ç”¨ store ä¸­çš„ getState ä¹Ÿæ˜¯å¯é€‰çš„
  const result = next(action);                // è°ƒç”¨ next(action) ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ– reducer
  console.log('Next State:', store.getState()); // æŸ¥çœ‹æ›´æ–°åçš„ state
  return result;
};
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š

- **`store` å‚æ•°**ï¼šæä¾›äº† `store.getState()` ç”¨äºè®°å½•å½“å‰çŠ¶æ€ã€‚
- **`next` å‚æ•°**ï¼šè°ƒç”¨ `next(action)` å°† action ä¼ é€’å‡ºå»ï¼Œç¡®ä¿å…¶ä»–ä¸­é—´ä»¶æˆ– reducer èƒ½æ¥æ”¶åˆ°è¿™ä¸ª actionã€‚
- **`action` å‚æ•°**ï¼šè®°å½•å¹¶ä¼ é€’å®é™…çš„ action å¯¹è±¡ã€‚

---

### æ€»ç»“

- **Redux ä¸­é—´ä»¶** ç”¨äºæ‰©å±• Redux çš„ `dispatch` åŠŸèƒ½ï¼Œå®ç°å¦‚æ—¥å¿—ã€å¼‚æ­¥è¯·æ±‚ã€é”™è¯¯å¤„ç†ç­‰åŠŸèƒ½ã€‚
- **æŸ¯é‡ŒåŒ–å‡½æ•°**çš„ä¸‰ä¸ªå±‚çº§åˆ†åˆ«æ¥æ”¶ï¼š
    - **ç¬¬ä¸€å±‚ï¼šstore å¯¹è±¡**ï¼ˆæä¾› `dispatch` å’Œ `getState`ï¼‰
    - **ç¬¬äºŒå±‚ï¼šnext å‡½æ•°**ï¼ˆä¼ é€’ action åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ– reducerï¼‰
    - **ç¬¬ä¸‰å±‚ï¼šaction å¯¹è±¡**ï¼ˆæè¿°å®é™…å‘ç”Ÿçš„äº‹ä»¶ï¼‰
- **å·¦ä¾§å‚æ•°**ï¼šä¸»è¦æ˜¯å…¨å±€çš„ `store`ï¼Œè€Œ **å³ä¾§å‚æ•°** åˆ™æ˜¯æ¯æ¬¡åˆ†å‘çš„ `action`ã€‚

è¿™æ ·ï¼Œé€šè¿‡æŸ¯é‡ŒåŒ–å‡½æ•°ï¼ŒRedux ä¸­é—´ä»¶å®ç°äº†å¯¹ action æµç¨‹çš„çµæ´»æ§åˆ¶å’Œæ‰©å±•ã€‚

## 6. Redux çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ° window ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«
Redux çŠ¶æ€ç®¡ç†å™¨å’Œå°†å˜é‡ç›´æ¥æŒ‚è½½åˆ° `window` å¯¹è±¡ä¸Šæœ‰ç€æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

1. **æ•°æ®ç®¡ç†å’Œç»„ç»‡ç»“æ„**
    
    - **Redux**ï¼š
        - **é›†ä¸­å¼å­˜å‚¨**ï¼šæ‰€æœ‰çŠ¶æ€ä¿å­˜åœ¨å•ä¸€çš„ Store ä¸­ï¼Œæˆä¸ºâ€œå•ä¸€æ•°æ®æºâ€ï¼Œä¾¿äºé›†ä¸­ç®¡ç†ã€‚
        - **ä¸å¯å˜æ€§å’Œçº¯å‡½æ•°æ›´æ–°**ï¼šçŠ¶æ€çš„æ›´æ–°å¿…é¡»é€šè¿‡ dispatch actionï¼Œå¹¶ç”±çº¯å‡½æ•°ï¼ˆReducerï¼‰è®¡ç®—å‡ºæ–°çš„çŠ¶æ€ï¼Œç¡®ä¿æ›´æ–°å¯é¢„æµ‹ä¸”å¯è°ƒè¯•ã€‚
        - **å•å‘æ•°æ®æµ**ï¼šçŠ¶æ€å˜æ›´æµç¨‹æ¸…æ™°ï¼Œæ•°æ®åªèƒ½ä» Store æµå‘ UIï¼Œé™ä½äº†æ•°æ®æ··ä¹±çš„å¯èƒ½æ€§ã€‚
    - **window æŒ‚è½½å˜é‡**ï¼š
        - **å…¨å±€å˜é‡**ï¼šå°†å˜é‡æŒ‚è½½åœ¨ `window` ä¸Šä¼šæˆä¸ºå…¨å±€å˜é‡ï¼Œå¯èƒ½å¯¼è‡´å‘½åå†²çªå’Œéš¾ä»¥ç®¡ç†ã€‚
        - **æ— ç»„ç»‡çš„çŠ¶æ€ç®¡ç†**ï¼šçŠ¶æ€æ²¡æœ‰ç»Ÿä¸€çš„æ›´æ–°è§„åˆ™ï¼Œç›´æ¥èµ‹å€¼å¯èƒ½å¯¼è‡´çŠ¶æ€æ··ä¹±å’Œéš¾ä»¥è¿½è¸ªæ›´æ–°æ¥æºã€‚
2. **å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§**
    
    - **Redux**ï¼š
        - **æ¨¡å—åŒ–ç®¡ç†**ï¼šé€šè¿‡ Reducerã€Actionã€Middleware ç­‰æœºåˆ¶ï¼Œå®ç°æ¨¡å—åŒ–å’Œå¯æ‰©å±•çš„çŠ¶æ€ç®¡ç†ä½“ç³»ã€‚
        - **æ˜“äºè°ƒè¯•**ï¼šå€ŸåŠ© Redux DevTools ç­‰å·¥å…·ï¼Œå¯ä»¥è¿½è¸ªæ¯ä¸€æ¬¡çŠ¶æ€çš„å˜åŒ–ï¼Œæ”¯æŒæ—¶é—´æ—…è¡Œè°ƒè¯•ã€‚
    - **window æŒ‚è½½å˜é‡**ï¼š
        - **ç¼ºä¹è§„èŒƒ**ï¼šå…¨å±€å˜é‡éšæ—¶å¯å˜ï¼Œç¼ºå°‘é›†ä¸­ç®¡ç†ï¼Œä»£ç ç»´æŠ¤éš¾åº¦å¤§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚
        - **è°ƒè¯•å›°éš¾**ï¼šçŠ¶æ€å˜åŒ–éš¾ä»¥è¿½è¸ªå’Œè®°å½•ï¼Œå¯èƒ½éšè— bug ä¸”éš¾ä»¥å®šä½é—®é¢˜ã€‚
3. **æ•°æ®éš”ç¦»ä¸å®‰å…¨æ€§**
    
    - **Redux**ï¼š
        - **æ•°æ®å°è£…**ï¼šé€šè¿‡ Provider å’Œè¿æ¥æœºåˆ¶ï¼ˆå¦‚ `connect` æˆ– `useSelector`ï¼‰ï¼Œåªå…è®¸éœ€è¦çš„ç»„ä»¶è®¿é—®å’Œè®¢é˜…çŠ¶æ€å˜åŒ–ï¼Œæ•°æ®æ›´ä¸ºå®‰å…¨å’Œéš”ç¦»ã€‚
    - **window æŒ‚è½½å˜é‡**ï¼š
        - **å…¨å±€æš´éœ²**ï¼šå…¨å±€å˜é‡æš´éœ²åœ¨ `window` å¯¹è±¡ä¸Šï¼Œä»»ä½•ä»£ç éƒ½å¯ä»¥ä¿®æ”¹ï¼Œå®¹æ˜“å¼•å…¥æ„å¤–çš„å‰¯ä½œç”¨å’Œå®‰å…¨éšæ‚£ã€‚
4. **å“åº”å¼å’Œæ€§èƒ½ä¼˜åŒ–**
    
    - **Redux**ï¼š
        - **é«˜æ•ˆæ›´æ–°**ï¼šåˆ©ç”¨çŠ¶æ€ä¸å¯å˜æ€§å’Œæµ…æ¯”è¾ƒï¼ˆshallow compareï¼‰ï¼Œå¯ä»¥ç²¾ç¡®åˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ï¼Œä»è€Œä¼˜åŒ–æ€§èƒ½ã€‚
    - **window æŒ‚è½½å˜é‡**ï¼š
        - **æ‰‹åŠ¨å¤„ç†**ï¼šå¦‚æœçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨é€šçŸ¥ç›¸å…³ç»„ä»¶è¿›è¡Œæ›´æ–°ï¼Œå®¹æ˜“å‡ºé”™ä¸”ç¼ºä¹å“åº”å¼èƒ½åŠ›ã€‚

---

### æ€»ç»“

- **Redux** æä¾›äº†ä¸€å¥—è§„èŒƒã€å¯é¢„æµ‹å’Œæ˜“äºè°ƒè¯•çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œé€‚ç”¨äºä¸­å¤§å‹å¤æ‚åº”ç”¨ï¼Œèƒ½ä¿è¯çŠ¶æ€æ›´æ–°æµç¨‹æ¸…æ™°ï¼Œæ•°æ®ç®¡ç†é«˜æ•ˆã€‚
- **å°†å˜é‡æŒ‚è½½åˆ° `window`** åˆ™æ˜¯ä¸€ç§éç»“æ„åŒ–çš„ã€å…¨å±€æ€§çš„çŠ¶æ€ç®¡ç†æ–¹å¼ï¼Œå®¹æ˜“å¼•å‘å‘½åå†²çªã€éš¾ä»¥è¿½è¸ªå’Œè°ƒè¯•é—®é¢˜ï¼Œä¸”éš¾ä»¥åº”å¯¹å¤æ‚åº”ç”¨ä¸­çš„çŠ¶æ€ä¾èµ–å’Œå˜åŒ–ã€‚

å› æ­¤ï¼Œåœ¨åº”ç”¨å¼€å‘ä¸­ï¼Œå°¤å…¶æ˜¯æ¶‰åŠå¤æ‚æ•°æ®äº¤äº’å’Œç»„ä»¶é—´é€šä¿¡æ—¶ï¼Œä½¿ç”¨ Redux è¿™æ ·çš„çŠ¶æ€ç®¡ç†å™¨è¦æ¯”ç®€å•æŒ‚è½½å…¨å±€å˜é‡æ›´åŠ ç¨³å¥å’Œå¯é ã€‚
## 7. mobox å’Œ redux æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
MobX å’Œ Redux éƒ½æ˜¯æµè¡Œçš„çŠ¶æ€ç®¡ç†åº“ï¼Œä½†å®ƒä»¬çš„è®¾è®¡ç†å¿µå’Œä½¿ç”¨æ–¹å¼å­˜åœ¨æ˜¾è‘—åŒºåˆ«ã€‚ä¸‹é¢ä»å‡ ä¸ªå…³é”®ç‚¹ä»‹ç»å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š

---

### 1. çŠ¶æ€ç®¡ç†ç†å¿µ

- **Redux**
    
    - **å•ä¸€æ•°æ®æº & ä¸å¯å˜çŠ¶æ€**ï¼šæ‰€æœ‰çŠ¶æ€å­˜å‚¨åœ¨ä¸€ä¸ªå…¨å±€çš„ä¸å¯å˜å¯¹è±¡æ ‘ä¸­ï¼ŒçŠ¶æ€æ›´æ–°å¿…é¡»é€šè¿‡çº¯å‡½æ•°ï¼ˆreducerï¼‰å’Œ action æ¥å®ç°ã€‚
    - **ä¸¥æ ¼çš„å•å‘æ•°æ®æµ**ï¼šæ•°æ®é€šè¿‡ dispatch -> reducer -> æ›´æ–° state çš„æµç¨‹ï¼ŒçŠ¶æ€å˜åŒ–æ˜“äºè¿½è¸ªå’Œè°ƒè¯•ã€‚
    - **å‡½æ•°å¼ç¼–ç¨‹é£æ ¼**ï¼šå¼ºè°ƒçº¯å‡½æ•°ã€ä¸å¯å˜æ•°æ®ä»¥åŠæ˜ç¡®çš„çŠ¶æ€è½¬æ¢ã€‚
- **MobX**
    
    - **å“åº”å¼ç¼–ç¨‹ & å¯å˜çŠ¶æ€**ï¼šçŠ¶æ€ä»¥å¯è§‚å¯Ÿï¼ˆobservableï¼‰çš„å½¢å¼å­˜åœ¨ï¼Œä»»ä½•è¢«è§‚å¯Ÿçš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘ä¾èµ–è¯¥æ•°æ®çš„ç»„ä»¶æ›´æ–°ã€‚
    - **è‡ªåŠ¨è¿½è¸ªä¾èµ–**ï¼šåˆ©ç”¨å“åº”å¼ç³»ç»Ÿè‡ªåŠ¨æ”¶é›†å’Œè¿½è¸ªä¾èµ–ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™å¤§é‡æ ·æ¿ä»£ç ã€‚
    - **é¢å‘å¯¹è±¡æˆ–å‡½æ•°å¼çš†å¯**ï¼šå¼€å‘è€…å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿½è¸ªå˜åŒ–å¹¶æ›´æ–°è§†å›¾ã€‚

---

### 2. ä»£ç ç»“æ„å’Œæ ·æ¿ä»£ç 

- **Redux**
    
    - é€šå¸¸éœ€è¦ç¼–å†™å¤§é‡çš„æ ·æ¿ä»£ç ï¼ˆaction typesã€action creatorsã€reducers ç­‰ï¼‰ï¼Œè™½ç„¶è¿™æœ‰åŠ©äºç»´æŠ¤å¤§å‹åº”ç”¨çš„å¯é¢„æµ‹æ€§å’Œè°ƒè¯•ï¼Œä½†åˆæœŸä¸Šæ‰‹å¯èƒ½è¾ƒç¹çã€‚
    - ä¾èµ–ä¸­é—´ä»¶ï¼ˆå¦‚ Redux Thunk æˆ– Redux Sagaï¼‰æ¥å¤„ç†å¼‚æ­¥é€»è¾‘å’Œå‰¯ä½œç”¨ã€‚
- **MobX**
    
    - ä»£ç æ›´ç®€æ´çµæ´»ï¼ŒçŠ¶æ€ç®¡ç†æ›´è‡ªç„¶ã€‚é€šè¿‡è£…é¥°å™¨æˆ– APIï¼ˆå¦‚ `makeObservable`ã€`observable`ã€`action` ç­‰ï¼‰ï¼Œå¯ä»¥è½»æ¾åœ°ä½¿çŠ¶æ€å˜å¾—å¯è§‚å¯Ÿã€‚
    - å¼‚æ­¥æ“ä½œå’Œå‰¯ä½œç”¨å¯ä»¥ç›´æ¥åœ¨ action ä¸­å¤„ç†ï¼Œæ— éœ€é¢å¤–çš„ä¸­é—´ä»¶ï¼Œé™ä½äº†æ ·æ¿ä»£ç é‡ã€‚

---

### 3. çŠ¶æ€æ›´æ–°å’Œæ€§èƒ½

- **Redux**
    
    - ç”±äºçŠ¶æ€æ˜¯ä¸å¯å˜çš„ï¼Œæ¯æ¬¡æ›´æ–°éƒ½ä¼šç”Ÿæˆæ–°çš„çŠ¶æ€å¯¹è±¡ï¼Œè¿™ä¾¿äºè¿›è¡ŒçŠ¶æ€æ¯”è¾ƒã€å›æº¯è°ƒè¯•ï¼ˆå¦‚ Redux DevToolsï¼‰ï¼Œä½†å¯èƒ½éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–æ€§èƒ½ï¼ˆå¦‚ä½¿ç”¨ `React.memo` æˆ– `shouldComponentUpdate`ï¼‰ã€‚
    - æ•´ä¸ªåº”ç”¨æ¯æ¬¡ dispatch éƒ½ä¼šè§¦å‘æ•´ä¸ª state æ ‘çš„å˜åŒ–ï¼Œç»„ä»¶éœ€è¦ä¾èµ–é€‰æ‹©å™¨æ¥ç²¾ç¡®é€‰æ‹©æ•°æ®ä»¥å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚
- **MobX**
    
    - é‡‡ç”¨å“åº”å¼æ›´æ–°ï¼Œåªæœ‰å®é™…ä¾èµ–æ”¹å˜çš„éƒ¨åˆ†ä¼šé‡æ–°æ¸²æŸ“ï¼Œå› æ­¤æ€§èƒ½ä¼˜åŒ–æ›´åŠ è‡ªåŠ¨åŒ–ã€‚
    - å…è®¸ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œæ›´æ–°è¿‡ç¨‹ååˆ†é«˜æ•ˆï¼Œä½†éœ€è¦æ³¨æ„çŠ¶æ€å˜æ›´çš„å¯è¿½è¸ªæ€§ï¼Œé˜²æ­¢æ»¥ç”¨å¯¼è‡´éš¾ä»¥ç»´æŠ¤çš„é—®é¢˜ã€‚

---

### 4. è°ƒè¯•ä¸å¼€å‘ä½“éªŒ

- **Redux**
    
    - ç”±äºä¸¥æ ¼çš„çŠ¶æ€æ›´æ–°æµç¨‹å’Œä¸å¯å˜æ•°æ®ï¼Œè°ƒè¯•å’ŒçŠ¶æ€å›æº¯éå¸¸æ–¹ä¾¿ã€‚Redux DevTools æä¾›æ—¶é—´æ—…è¡Œè°ƒè¯•ç­‰åŠŸèƒ½ï¼Œä½¿å¾—é”™è¯¯å®šä½å’ŒçŠ¶æ€ç®¡ç†æ›´ä¸ºæ˜ç¡®ã€‚
    - å¼ºåˆ¶éµå®ˆä¸å¯å˜æ€§åŸåˆ™ï¼Œä½¿å¾—åº”ç”¨åœ¨é€»è¾‘ä¸Šæ›´å¯é¢„æµ‹ã€‚
- **MobX**
    
    - è°ƒè¯•æ—¶ï¼ŒçŠ¶æ€æ˜¯å¯å˜çš„ï¼Œè™½ç„¶å“åº”å¼ç³»ç»Ÿèƒ½è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œä½†çŠ¶æ€å˜åŒ–å¯èƒ½ä¸å¦‚ Redux é‚£æ ·æ¸…æ™°ï¼Œå°¤å…¶åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œéœ€è¦å¼€å‘è€…é¢å¤–æ³¨æ„çŠ¶æ€çš„ç®¡ç†å’Œå˜åŒ–æµç¨‹ã€‚
    - å¼€å‘ä½“éªŒæ›´ä¸ºç®€æ´ï¼Œä½†è°ƒè¯•å·¥å…·å’Œæ¨¡å¼ç›¸å¯¹ Redux è¾ƒå°‘ï¼Œéœ€è¦ä¾èµ–æ—¥å¿—å’Œç›‘æ§å·¥å…·æ¥è·Ÿè¸ªè‡ªåŠ¨åŒ–çš„ä¾èµ–æ›´æ–°ã€‚

---

### 5. ç¤¾åŒºå’Œç”Ÿæ€

- **Redux**
    - ç¤¾åŒºæ´»è·ƒï¼Œç”Ÿæ€ç³»ç»Ÿæˆç†Ÿï¼Œæœ‰å¤§é‡ä¸­é—´ä»¶ã€å·¥å…·å’Œæ–‡æ¡£æ”¯æŒã€‚é€‚åˆå¤§å‹ã€å¤æ‚çš„åº”ç”¨éœ€è¦ä¸¥æ ¼æ§åˆ¶çŠ¶æ€æµå’Œè°ƒè¯•çš„åœºæ™¯ã€‚
- **MobX**
    - ç¤¾åŒºä¹Ÿå¾ˆæ´»è·ƒï¼Œä½†æ•´ä½“ç”Ÿæ€ç³»ç»Ÿç›¸å¯¹è½»é‡ã€‚é€‚ç”¨äºéœ€è¦å¿«é€Ÿå¼€å‘ã€å¯¹çŠ¶æ€å˜åŒ–è¦æ±‚è¾ƒä¸ºçµæ´»çš„å°åˆ°ä¸­å‹é¡¹ç›®ï¼Œæˆ–å¼€å‘è€…æ›´å€¾å‘äºé¢å‘å¯¹è±¡ç¼–ç¨‹é£æ ¼çš„åœºæ™¯ã€‚

---

### æ€»ç»“

- **Redux**ï¼šé€‚åˆè¿½æ±‚é«˜åº¦å¯é¢„æµ‹ã€ä¸¥æ ¼å•å‘æ•°æ®æµå’Œå®Œæ•´è°ƒè¯•èƒ½åŠ›çš„åº”ç”¨ï¼Œè™½ç„¶éœ€è¦ç¼–å†™è¾ƒå¤šæ ·æ¿ä»£ç ï¼Œä½†å¯¹äºå¤æ‚ä¸šåŠ¡é€»è¾‘å’Œå¤§è§„æ¨¡åº”ç”¨ååˆ†æœ‰å¸®åŠ©ã€‚
- **MobX**ï¼šæ›´çµæ´»ã€ç®€æ´ï¼Œåˆ©ç”¨å“åº”å¼ç¼–ç¨‹é™ä½æ ·æ¿ä»£ç é‡ï¼Œé€‚åˆå¯¹å¼€å‘é€Ÿåº¦æœ‰è¦æ±‚çš„å°åˆ°ä¸­å‹é¡¹ç›®ï¼Œä¸è¿‡åœ¨å¤§å‹åº”ç”¨ä¸­å¯èƒ½éœ€è¦é¢å¤–çš„è§„èŒƒæ¥ç®¡ç†çŠ¶æ€å˜åŒ–ã€‚

é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªä¸»è¦å–å†³äºå›¢é˜Ÿçš„å¼€å‘ä¹ æƒ¯ã€é¡¹ç›®å¤æ‚åº¦ä»¥åŠå¯¹çŠ¶æ€ç®¡ç†å¯é¢„æµ‹æ€§ä¸çµæ´»æ€§çš„éœ€æ±‚ã€‚
## 8. Redux å’Œ Pinia æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³

Redux å’Œ Pinia éƒ½æ˜¯çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œä½†å®ƒä»¬åˆ†åˆ«é’ˆå¯¹ä¸åŒçš„ç”Ÿæ€ç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨è®¾è®¡ç†å¿µå’Œå®ç°æ–¹å¼ä¸Šå­˜åœ¨ä¸€äº›åŒºåˆ«ï¼ŒåŒæ—¶å®ƒä»¬ä¹Ÿå…±äº«ä¸€äº›æ ¸å¿ƒçš„æ€æƒ³ã€‚ä¸‹é¢è¯¦ç»†è¯´æ˜å®ƒä»¬çš„åŒºåˆ«å’Œå…±åŒæ€æƒ³ï¼š

---

### ä¸€ã€ä¸»è¦åŒºåˆ«

1. **å¹³å°å’Œç”Ÿæ€ç³»ç»Ÿ**
    
    - **Redux**ï¼š
        - ä¸»è¦ç”¨äº Reactï¼ˆä¹Ÿæ”¯æŒå…¶ä»–æ¡†æ¶ï¼Œä½†ç”Ÿæ€ä¸»è¦å›´ç»• React å±•å¼€ï¼‰ã€‚
        - å¼ºè°ƒä¸å¯å˜æ€§ï¼ŒçŠ¶æ€æ›´æ–°ä¾èµ–çº¯å‡½æ•°ï¼ˆreducerï¼‰å’Œä¸­é—´ä»¶æ¥å¤„ç†å¼‚æ­¥é€»è¾‘ã€‚
    - **Pinia**ï¼š
        - ä¸»è¦ç”¨äº Vueï¼ˆå°¤å…¶æ˜¯ Vue 3ï¼Œæ˜¯ Vuex çš„æ–°ä¸€ä»£æ›¿ä»£å“ï¼‰ã€‚
        - åˆ©ç”¨ Vue çš„å“åº”å¼ç³»ç»Ÿå’Œ Composition APIï¼ŒçŠ¶æ€å¯ä»¥ç›´æ¥ä¿®æ”¹ï¼Œæ›´æ–°æ—¶è‡ªåŠ¨è§¦å‘è§†å›¾æ›´æ–°ã€‚
2. **çŠ¶æ€æ›´æ–°æœºåˆ¶**
    
    - **Redux**ï¼š
        - çŠ¶æ€å¿…é¡»ä¿æŒä¸å¯å˜ï¼Œæ›´æ–°çŠ¶æ€æ—¶éœ€è¦è¿”å›å…¨æ–°çš„ state å¯¹è±¡ã€‚
        - æ›´æ–°é€»è¾‘é›†ä¸­åœ¨ reducer å‡½æ•°ä¸­ï¼Œæ•´ä¸ªæµç¨‹åŸºäº dispatch â†’ reducer â†’ store æ›´æ–°ã€‚
    - **Pinia**ï¼š
        - çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ï¼ˆç±»ä¼¼äº mutable çŠ¶æ€ï¼‰ï¼Œè€Œ Vue å†…éƒ¨ä¼šè·Ÿè¸ªè¿™äº›ä¿®æ”¹å¹¶è‡ªåŠ¨è§¦å‘æ›´æ–°ã€‚
        - æ›´åŠ è½»é‡å’Œç›´è§‚ï¼Œæ— éœ€åƒ Redux é‚£æ ·å†™å¤§é‡çš„æ ·æ¿ä»£ç ï¼ˆboilerplateï¼‰ã€‚
3. **API å’Œå¼€å‘ä½“éªŒ**
    
    - **Redux**ï¼š
        - é€šå¸¸éœ€è¦å®šä¹‰ action typesã€action creators å’Œ reducerï¼Œç»“æ„è¾ƒä¸ºä¸¥æ ¼ä¸”æ ·æ¿ä»£ç è¾ƒå¤šã€‚
        - å¼‚æ­¥æ“ä½œé€šå¸¸ä¾èµ– Redux Thunkã€Redux Saga ç­‰ä¸­é—´ä»¶æ¥æ‰©å±• dispatch åŠŸèƒ½ã€‚
    - **Pinia**ï¼š
        - API æ›´åŠ ç®€æ´ç›´è§‚ï¼Œé‡‡ç”¨ç±»ä¼¼æ¨¡å—åŒ–çš„ store å®šä¹‰ï¼Œå†…ç½®å¯¹çŠ¶æ€ã€getter å’Œ actions çš„æ”¯æŒã€‚
        - ä¸ Vue çš„ç”Ÿæ€æ— ç¼é›†æˆï¼Œé…ç½®å’Œä½¿ç”¨éƒ½æ¯”è¾ƒç®€å•ï¼Œä»£ç é‡è¾ƒå°‘ã€‚
4. **è°ƒè¯•å’Œç”Ÿæ€å·¥å…·**
    
    - **Redux**ï¼š
        - æœ‰éå¸¸æˆç†Ÿçš„è°ƒè¯•å·¥å…·ï¼Œå¦‚ Redux DevToolsï¼Œèƒ½å¤Ÿè¿›è¡Œæ—¶é—´æ—…è¡Œè°ƒè¯•ã€çŠ¶æ€å¿«ç…§ç­‰ã€‚
    - **Pinia**ï¼š
        - åŒæ ·æ”¯æŒ Vue DevToolsï¼Œèƒ½å¤ŸæŸ¥çœ‹å’Œè°ƒè¯•å„ä¸ª store çš„çŠ¶æ€ï¼Œä¸”é›†æˆæ€§è¾ƒå¥½ã€‚

---

### äºŒã€å…±åŒæ€æƒ³

å°½ç®¡ Redux å’Œ Pinia é¢å‘ä¸åŒå¹³å°ï¼Œä½†å®ƒä»¬å…±äº«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ€æƒ³ï¼š

1. **é›†ä¸­å¼çŠ¶æ€ç®¡ç†**
    
    - éƒ½é‡‡ç”¨â€œå•ä¸€æ•°æ®æºâ€çš„è®¾è®¡ç†å¿µï¼Œå°†åº”ç”¨çš„çŠ¶æ€é›†ä¸­å­˜å‚¨åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª Store ä¸­ï¼Œé¿å…ç»„ä»¶é—´â€œprops drillingâ€ï¼Œè®©çŠ¶æ€ç®¡ç†æ›´åŠ é›†ä¸­å’Œå¯æ§ã€‚
2. **å•å‘æ•°æ®æµ**
    
    - çŠ¶æ€çš„ä¿®æ”¹éƒ½æ˜¯ä»ä¸€ä¸ªä¸­å¿ƒå‘èµ·ï¼Œé€šè¿‡ç‰¹å®šçš„æ–¹å¼æ›´æ–°çŠ¶æ€ï¼Œå†é©±åŠ¨è§†å›¾æ›´æ–°ã€‚è¿™ç§å•å‘æ•°æ®æµæœ‰åŠ©äºè¿½è¸ªå’Œè°ƒè¯•çŠ¶æ€å˜åŒ–ã€‚
3. **æ˜ç¡®çš„çŠ¶æ€æ›´æ–°é€»è¾‘**
    
    - Redux é€šè¿‡çº¯å‡½æ•°ï¼ˆreducerï¼‰å’Œ Pinia é€šè¿‡ actionsï¼ˆåœ¨ Vue ä¸­å¸¸ä¸å“åº”å¼ç³»ç»Ÿé…åˆï¼‰æ¥å®šä¹‰çŠ¶æ€æ›´æ–°çš„æ–¹å¼ï¼Œä½¿å¾—çŠ¶æ€çš„å˜åŒ–å˜å¾—å¯é¢„æµ‹ä¸”æ˜“äºç»´æŠ¤ã€‚
4. **å·¥å…·é“¾ä¸ç”Ÿæ€æ”¯æŒ**
    
    - ä¸¤è€…éƒ½æä¾›äº†ä¸°å¯Œçš„å·¥å…·å’Œæ’ä»¶ç”Ÿæ€ï¼ˆå¦‚è°ƒè¯•å·¥å…·ã€æ’ä»¶æ‰©å±•ç­‰ï¼‰ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç®¡ç†å’Œè°ƒè¯•åº”ç”¨çŠ¶æ€ã€‚

---

### æ€»ç»“

- **åŒºåˆ«**ï¼š  
    Redux é€‚åˆ React åº”ç”¨ï¼Œå¼ºè°ƒä¸å¯å˜æ•°æ®å’Œå‡½æ•°å¼ç¼–ç¨‹ï¼›Pinia åˆ™æ˜¯ä¸“ä¸º Vue è®¾è®¡ï¼Œåˆ©ç”¨ Vue çš„å“åº”å¼ç³»ç»Ÿï¼Œä»£ç æ›´ç®€æ´ç›´è§‚ã€‚
    
- **å…±åŒæ€æƒ³**ï¼š  
    ä¸¤è€…éƒ½è‡´åŠ›äºé›†ä¸­å¼çŠ¶æ€ç®¡ç†ã€å•å‘æ•°æ®æµå’Œæ˜ç¡®çš„çŠ¶æ€æ›´æ–°é€»è¾‘ï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºæ›´å¯ç»´æŠ¤ã€å¯é¢„æµ‹çš„åº”ç”¨çŠ¶æ€ç®¡ç†ä½“ç³»ã€‚
    

æ ¹æ®é¡¹ç›®æ‰€ä½¿ç”¨çš„æ¡†æ¶å’Œå›¢é˜Ÿçš„å¼€å‘ä¹ æƒ¯ï¼Œé€‰æ‹©é€‚åˆçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆå°†æœ‰åŠ©äºæå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚
## 9. Redux ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store å’Œ action? ç„¶åæ€ä¹ˆå¤„ç†?

Redux ä¸­é—´ä»¶åˆ©ç”¨æŸ¯é‡ŒåŒ–å‡½æ•°çš„æœºåˆ¶ï¼Œåœ¨åˆ›å»º store æ—¶é€šè¿‡ `applyMiddleware` æ³¨å…¥åˆ° Redux æµç¨‹ä¸­ï¼Œä»è€Œèƒ½å¤Ÿæ‹¦æˆªå’Œå¤„ç†æ¯ä¸ªè¢« dispatch çš„ actionã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»ä¸­é—´ä»¶æ˜¯å¦‚ä½•æ‹¿åˆ° `store` å’Œ `action` ä»¥åŠå¦‚ä½•å¤„ç†å®ƒä»¬çš„ï¼š

---

### 1. ä¸­é—´ä»¶çš„åŸºæœ¬ç»“æ„

Redux ä¸­é—´ä»¶çš„æ ‡å‡†å†™æ³•æ˜¯ä¸€ä¸ªä¸‰å±‚å‡½æ•°ï¼š

```js
const middleware = store => next => action => {
  // åœ¨è¿™é‡Œå¯ä»¥å¤„ç† action æˆ–è€…åšå…¶ä»–é€»è¾‘
  return next(action);
};
```

- **ç¬¬ä¸€å±‚å‚æ•°ï¼š`store`**
    
    - å½“ä¸­é—´ä»¶è¢«åº”ç”¨æ—¶ï¼ŒRedux ä¼šå°†æ•´ä¸ª `store` å¯¹è±¡ä¼ é€’ç»™ä¸­é—´ä»¶ã€‚è¿™ä¸ª `store` å¯¹è±¡é€šå¸¸åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼š`getState()` å’Œ `dispatch()`ï¼Œä½¿å¾—ä¸­é—´ä»¶å¯ä»¥è¯»å–å½“å‰çš„çŠ¶æ€æˆ–è€…é‡æ–° dispatch å…¶ä»– actionã€‚
- **ç¬¬äºŒå±‚å‚æ•°ï¼š`next`**
    
    - `next` æ˜¯ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„ dispatch å‡½æ•°ï¼Œæˆ–è€…å¦‚æœå½“å‰ä¸­é—´ä»¶å¤„äºé“¾æ¡çš„æœ«ç«¯ï¼Œåˆ™ä¸º Redux åŸç”Ÿçš„ dispatchã€‚è°ƒç”¨ `next(action)` ä¼šå°† action ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–è€… reducerã€‚
- **ç¬¬ä¸‰å±‚å‚æ•°ï¼š`action`**
    
    - è¿™æ˜¯è¢« dispatch çš„å®é™… action å¯¹è±¡ï¼Œä¸­é—´ä»¶å¯ä»¥åŸºäºè¿™ä¸ª action åšæ‹¦æˆªã€ä¿®æ”¹ã€å»¶è¿Ÿæˆ–å…¶ä»–å¤„ç†ã€‚

---

### 2. ä¸­é—´ä»¶å¦‚ä½•â€œæ‹¿åˆ°â€ store å’Œ action

- **store çš„ä¼ é€’**  
    å½“ä½ ä½¿ç”¨ `applyMiddleware(middleware)` åˆ›å»º store æ—¶ï¼ŒRedux ä¼šæŠŠæ‰€æœ‰ä¼ å…¥çš„ä¸­é—´ä»¶æŒ‰ç…§é¡ºåºä¸²è”èµ·æ¥ï¼Œå¹¶ä¼ å…¥æ•´ä¸ª `store` å¯¹è±¡ã€‚è¿™å°±æ„å‘³ç€æ¯ä¸ªä¸­é—´ä»¶åœ¨ç¬¬ä¸€å±‚å°±èƒ½è®¿é—® `store.getState()` å’Œ `store.dispatch()`ã€‚
    
- **action çš„ä¼ é€’**  
    å½“è°ƒç”¨ `store.dispatch(action)` æ—¶ï¼ŒRedux ä¼šæŒ‰ç…§ä¸­é—´ä»¶é“¾çš„é¡ºåºä¾æ¬¡è°ƒç”¨æ¯ä¸ªä¸­é—´ä»¶ï¼Œæœ€ç»ˆå°† action ä¼ é€’åˆ° reducerã€‚æ¯ä¸ªä¸­é—´ä»¶çš„ç¬¬ä¸‰å±‚å‡½æ•°æ¥æ”¶åˆ°å½“å‰è¢« dispatch çš„ actionã€‚
    

---

### 3. ä¸­é—´ä»¶å¦‚ä½•å¤„ç† action

ä¸­é—´ä»¶çš„ä¸»è¦ä½œç”¨å°±æ˜¯å¯¹ action è¿›è¡Œå¤„ç†åå†ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç¯èŠ‚ã€‚å¸¸è§çš„å¤„ç†æ–¹å¼åŒ…æ‹¬ï¼š

- **æ‹¦æˆªæˆ–ä¿®æ”¹ action**  
    å¯ä»¥åœ¨ä¸­é—´ä»¶å†…éƒ¨æ£€æŸ¥ action çš„ç±»å‹æˆ–å±æ€§ï¼Œå†³å®šæ˜¯å¦ä¿®æ”¹æˆ–ç›´æ¥é˜»æ­¢å…¶ç»§ç»­ä¼ æ’­ã€‚ä¾‹å¦‚ï¼Œæ—¥å¿—ä¸­é—´ä»¶å¯ä»¥åœ¨ action ä¼ é€’å‰åæ‰“å°æ—¥å¿—ï¼š
    
    ```js
    const loggerMiddleware = store => next => action => {
      console.log('Dispatching:', action);
      const result = next(action); // å°† action ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ– reducer
      console.log('Next State:', store.getState());
      return result;
    };
    ```
    
- **å¤„ç†å¼‚æ­¥æ“ä½œ**  
    åƒ Redux Thunk å°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå®ƒå…è®¸ dispatch ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªçº¯å¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶åˆ° `dispatch` å’Œ `getState`ï¼Œä»è€Œå¯ä»¥æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œå† dispatch åç»­çš„ actionã€‚
    
    ```js
    const thunkMiddleware = store => next => action => {
      if (typeof action === 'function') {
        return action(store.dispatch, store.getState);
      }
      return next(action);
    };
    ```
    
- **æ§åˆ¶ action çš„ä¼ é€’é¡ºåº**  
    ä¸­é—´ä»¶å¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶æœºè°ƒç”¨ `next(action)`ï¼Œä¾‹å¦‚å¯ä»¥å»¶è¿Ÿ dispatch æˆ–åœ¨æŸäº›æ¡ä»¶ä¸‹å–æ¶ˆ dispatchã€‚
    

---

### 4. å·¥ä½œæµç¨‹æ€»ç»“

1. **åˆå§‹åŒ–æ—¶**ï¼š  
    ä½¿ç”¨ `applyMiddleware` æ—¶ï¼ŒRedux å°†ä¸­é—´ä»¶é“¾è®¾ç½®å¥½ï¼Œå¹¶ä¸ºæ¯ä¸ªä¸­é—´ä»¶ä¼ å…¥ `store` å¯¹è±¡ã€‚
    
2. **dispatch æ—¶**ï¼š  
    å½“è°ƒç”¨ `store.dispatch(action)` æ—¶ï¼Œaction ä¼šé€šè¿‡ä¸­é—´ä»¶é“¾ï¼š
    
    - æ¯ä¸ªä¸­é—´ä»¶æ¥æ”¶åˆ° `action` åï¼Œå¯ä»¥è¿›è¡Œæ‹¦æˆªã€ä¿®æ”¹ã€å¼‚æ­¥æ“ä½œç­‰é€»è¾‘ã€‚
    - é€šè¿‡è°ƒç”¨ `next(action)` å°†å¤„ç†è¿‡çš„ action ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚
    - æœ€ç»ˆï¼Œaction åˆ°è¾¾ Redux å†…éƒ¨çš„åŸç”Ÿ dispatchï¼Œç„¶åä¼ é€’ç»™ reducer æ›´æ–°çŠ¶æ€ã€‚

è¿™ç§è®¾è®¡ä½¿å¾—ä¸­é—´ä»¶å¯ä»¥çµæ´»åœ°åœ¨ action åˆ†å‘å’Œ reducer æ›´æ–°ä¹‹é—´æ’å…¥å„ç§è‡ªå®šä¹‰é€»è¾‘ï¼Œä»è€Œæ‰©å±• Redux çš„åŠŸèƒ½ã€‚

## 10. Reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨
`connect` æ˜¯ React-Redux æä¾›çš„ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼ˆ**Higher-Order Componentï¼ŒHOC**ï¼‰ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯å°† React ç»„ä»¶ä¸ Redux çš„å…¨å±€çŠ¶æ€ï¼ˆstoreï¼‰è¿›è¡Œè¿æ¥ï¼Œä»è€Œä½¿ç»„ä»¶èƒ½å¤Ÿï¼š

1. **è¯»å– Redux çŠ¶æ€**  
    é€šè¿‡å®šä¹‰ `mapStateToProps`ï¼Œ`connect` ä¼šå°† Redux store ä¸­çš„ç‰¹å®šçŠ¶æ€æ˜ å°„åˆ°ç»„ä»¶çš„ props ä¸Šï¼Œä½¿ç»„ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ•°æ®è€Œæ— éœ€æ‰‹åŠ¨è®¢é˜… storeã€‚
    
2. **æ´¾å‘ Action**  
    é€šè¿‡å®šä¹‰ `mapDispatchToProps`ï¼ˆæˆ–è‡ªåŠ¨ç»‘å®š dispatchï¼‰ï¼Œ`connect` èƒ½å°† dispatch æ–¹æ³•æˆ– action åˆ›å»ºå‡½æ•°æ³¨å…¥ç»„ä»¶çš„ propsï¼Œä½¿ç»„ä»¶èƒ½å¤Ÿæ–¹ä¾¿åœ°åˆ†å‘ action æ›´æ–°çŠ¶æ€ã€‚
    
3. **è‡ªåŠ¨æ›´æ–°**  
    `connect` å†…éƒ¨ä¼šè®¢é˜… Redux storeï¼Œå½“ store ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é‡æ–°è®¡ç®—æ˜ å°„çš„ props å¹¶è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™æ ·ç»„ä»¶å§‹ç»ˆèƒ½å±•ç¤ºæœ€æ–°çŠ¶æ€ã€‚
    

---

### å…·ä½“å·¥ä½œæµç¨‹

4. **ä¼ å…¥æ˜ å°„å‡½æ•°**
    
    - `mapStateToProps`ï¼šä» Redux store ä¸­é€‰æ‹©ç»„ä»¶æ‰€éœ€çš„çŠ¶æ€æ•°æ®ï¼Œå¹¶å°†å…¶ä½œä¸º props ä¼ ç»™ç»„ä»¶ã€‚
    - `mapDispatchToProps`ï¼šå®šä¹‰ç»„ä»¶ä¸­éœ€è¦è°ƒç”¨çš„ actionï¼ˆæˆ–ç›´æ¥ä½¿ç”¨ dispatchï¼‰ï¼Œä¹Ÿä½œä¸º props ä¼ é€’ç»™ç»„ä»¶ã€‚
5. **è¿”å›é«˜é˜¶ç»„ä»¶**  
    `connect` ä¼šè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œè¿™ä¸ªæ–°ç»„ä»¶å†…éƒ¨è®¢é˜…äº† Redux storeï¼Œå¹¶åœ¨ store æ›´æ–°æ—¶è°ƒç”¨ `mapStateToProps` é‡æ–°è®¡ç®—æ•°æ®ï¼Œç„¶åå°†è¿™äº›æ•°æ®å’Œ dispatch æ–¹æ³•ä¼ é€’ç»™åŸå§‹ç»„ä»¶ã€‚
    
6. **è‡ªåŠ¨è®¢é˜…å’Œè§£é™¤è®¢é˜…**  
    åœ¨ç»„ä»¶æŒ‚è½½æ—¶ï¼Œ`connect` ä¼šè‡ªåŠ¨è®¢é˜… Redux storeï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶è§£é™¤è®¢é˜…ï¼Œç¡®ä¿ç»„ä»¶åªåœ¨éœ€è¦çš„æ—¶å€™æ›´æ–°ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚
    

---

### ç¤ºä¾‹ä»£ç 

```jsx
import React from 'react';
import { connect } from 'react-redux';

// å®šä¹‰ä» store ä¸­æå–æ•°æ®çš„å‡½æ•°
const mapStateToProps = (state) => ({
  count: state.count,
});

// å®šä¹‰åˆ†å‘ action çš„å‡½æ•°
const mapDispatchToProps = (dispatch) => ({
  increment: () => dispatch({ type: 'INCREMENT' }),
});

// è¢«è¿æ¥çš„ç»„ä»¶
function Counter({ count, increment }) {
  return (
    <div>
      <h1>{count}</h1>
      <button onClick={increment}>Increment</button>
    </div>
  );
}

// ä½¿ç”¨ connect å°† Counter ç»„ä»¶å’Œ Redux store è¿æ¥èµ·æ¥
export default connect(mapStateToProps, mapDispatchToProps)(Counter);
```

---

### æ€»ç»“

- **ç®€åŒ–ä»£ç **ï¼š`connect` å¸®åŠ©å¼€å‘è€…é¿å…æ‰‹åŠ¨è®¢é˜…å’Œæ›´æ–° Redux storeï¼Œé€šè¿‡ç»Ÿä¸€çš„æ–¹å¼å°† store çŠ¶æ€å’Œ dispatch æ–¹æ³•æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚
- **æå‡å¯ç»´æŠ¤æ€§**ï¼šåˆ©ç”¨ `mapStateToProps` å’Œ `mapDispatchToProps`ï¼Œå¯ä»¥æ¸…æ™°åœ°åˆ†ç¦»æ•°æ®è¯»å–å’Œä¸šåŠ¡é€»è¾‘ï¼Œä½¿å¾—ç»„ä»¶æ›´åŠ ä¸“æ³¨äº UI æ¸²æŸ“ã€‚
- **è‡ªåŠ¨æ›´æ–°**ï¼šå½“ Redux store å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿æ¥çš„ç»„ä»¶ä¼šè‡ªåŠ¨æ›´æ–°æ˜¾ç¤ºæœ€æ–°çš„çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†è®¢é˜…é€»è¾‘ã€‚

å› æ­¤ï¼Œ`connect` æ˜¯å°† React ä¸ Redux ç´§å¯†é›†æˆçš„æ¡¥æ¢ï¼Œä½¿å¾—æ•°æ®æµç®¡ç†å’ŒçŠ¶æ€æ›´æ–°å˜å¾—æ›´åŠ ç®€å•ã€ç›´è§‚å’Œå¯ç»´æŠ¤ã€‚