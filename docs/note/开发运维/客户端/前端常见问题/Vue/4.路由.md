# å››ã€è·¯ç”±
## 1. Vue-Router çš„æ‡’åŠ è½½å¦‚ä½•å®ç°

Vue Router çš„ **æ‡’åŠ è½½**ï¼ˆLazy Loadingï¼‰æ˜¯æŒ‡ **æŒ‰éœ€åŠ è½½è·¯ç”±ç»„ä»¶**ï¼Œå³å½“è®¿é—®æŸä¸ªè·¯ç”±æ—¶ï¼Œæ‰ä¼šåŠ è½½å¯¹åº”çš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰ç»„ä»¶ã€‚è¿™æ ·å¯ä»¥å‡å°‘**é¦–å±åŠ è½½æ—¶é—´**ï¼Œæå‡æ€§èƒ½ã€‚

---

### 1. ä¸ºä»€ä¹ˆéœ€è¦æ‡’åŠ è½½ï¼Ÿ

åœ¨å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ä¸­ï¼Œå¦‚æœæ‰€æœ‰è·¯ç”±ç»„ä»¶éƒ½ä¸€æ¬¡æ€§åŠ è½½ï¼Œä¼šå¯¼è‡´ï¼š

- **é¦–å±åŠ è½½å˜æ…¢**ï¼šJS ä½“ç§¯å¤§ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚
- **èµ„æºæµªè´¹**ï¼šç”¨æˆ·å¯èƒ½ä¸ä¼šè®¿é—®æŸäº›é¡µé¢ï¼Œä½†å®ƒä»¬ä»ç„¶è¢«åŠ è½½ã€‚

**æ‡’åŠ è½½** åªåœ¨**éœ€è¦æ—¶æ‰åŠ è½½ç»„ä»¶**ï¼Œä¼˜åŒ–äº†åŠ è½½é€Ÿåº¦ã€‚

---

### 2. Vue Router æ‡’åŠ è½½çš„å®ç°

#### âœ… æ–¹æ³• 1ï¼š`import()` è¿›è¡ŒåŠ¨æ€å¯¼å…¥

Vue 3 é»˜è®¤æ”¯æŒ **åŠ¨æ€ `import()` è¯­æ³•**ï¼Œå¯ç›´æ¥åœ¨ `Vue Router` ä¸­ä½¿ç”¨ï¼š

```js
import { createRouter, createWebHistory } from "vue-router";

const routes = [
  {
    path: "/home",
    component: () => import("@/views/Home.vue") // æ‡’åŠ è½½
  },
  {
    path: "/about",
    component: () => import("@/views/About.vue") // æ‡’åŠ è½½
  }
];

const router = createRouter({
  history: createWebHistory(),
  routes
});

export default router;
```

ğŸ“Œ **`() => import("xxx")` è¯­æ³•**

- åªæœ‰å½“ç”¨æˆ·è®¿é—® `/home` æ—¶ï¼Œ`Home.vue` æ‰ä¼šè¢«åŠ è½½ã€‚
- Vue **è‡ªåŠ¨å°†ä¸åŒè·¯ç”±æ‰“åŒ…æˆç‹¬ç«‹çš„ `chunk.js` æ–‡ä»¶**ã€‚

**ğŸ“Œ Webpack æ‰“åŒ…åçš„æ–‡ä»¶**

```sh
dist/
  â”œâ”€â”€ index.html
  â”œâ”€â”€ assets/
  â”œâ”€â”€ js/
  â”‚   â”œâ”€â”€ app.js
  â”‚   â”œâ”€â”€ 0.chunk.js  # Home.vueï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
  â”‚   â”œâ”€â”€ 1.chunk.js  # About.vueï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
```

---

#### âœ… æ–¹æ³• 2ï¼šä½¿ç”¨ `defineAsyncComponent()`

Vue 3 æä¾›äº† `defineAsyncComponent()` è¿›è¡Œ**æ‰‹åŠ¨æ‡’åŠ è½½**ï¼š

```js
import { defineAsyncComponent } from "vue";

const AsyncHome = defineAsyncComponent(() => import("@/views/Home.vue"));

const routes = [
  {
    path: "/home",
    component: AsyncHome
  }
];
```

ğŸ“Œ **é€‚ç”¨äº**ï¼š

- éœ€è¦æ˜¾ç¤º **åŠ è½½çŠ¶æ€** æˆ– **é”™è¯¯å¤„ç†** æ—¶ã€‚

---

#### âœ… æ–¹æ³• 3ï¼šå¸¦ `loading` å’Œ `error` å¤„ç†

å¯ä»¥ä½¿ç”¨ `defineAsyncComponent()` è®¾ç½® **åŠ è½½ä¸­** å’Œ **åŠ è½½å¤±è´¥** çŠ¶æ€ï¼š

```js
import { defineAsyncComponent } from "vue";

const AsyncHome = defineAsyncComponent({
  loader: () => import("@/views/Home.vue"),
  loadingComponent: () => import("@/components/Loading.vue"), // åŠ è½½ä¸­ç»„ä»¶
  errorComponent: () => import("@/components/Error.vue"), // é”™è¯¯ç»„ä»¶
  delay: 200, // å»¶è¿Ÿ 200ms æ˜¾ç¤º loading
  timeout: 3000 // 3s å†…æœªåŠ è½½å®Œæˆåˆ™æŠ¥é”™
});

const routes = [
  { path: "/home", component: AsyncHome }
];
```

ğŸ“Œ **é€‚ç”¨äº**

- ç½‘ç»œè¾ƒæ…¢æ—¶ï¼Œæ˜¾ç¤º **loading**ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚
- å¤±è´¥æ—¶ï¼Œæä¾› **é”™è¯¯æç¤º**ã€‚

---

### 3. æ‡’åŠ è½½ç»“åˆ Webpack åˆ†åŒ…

Webpack **æŒ‰éœ€æ‰“åŒ…**ï¼Œé»˜è®¤ä¼šæŠŠ `import()` è¯­æ³•è½¬æ¢æˆ**ç‹¬ç«‹çš„ `chunk.js` æ–‡ä»¶**ï¼š

```js
const routes = [
  {
    path: "/home",
    component: () => import(/* webpackChunkName: "home" */ "@/views/Home.vue")
  }
];
```

ğŸ“Œ **`webpackChunkName`**
- æŒ‡å®š chunk åç§°ï¼Œæ‰“åŒ…åå˜æˆ `home.chunk.js`ï¼Œä¾¿äºç®¡ç†ã€‚
- **é»˜è®¤åç§°æ˜¯æ•°å­—**ï¼ˆå¦‚ `0.chunk.js`ï¼‰ï¼ŒåŠ  `webpackChunkName` å¯æ”¹ä¸º `home.chunk.js`ã€‚

---

### 4. Vue-Router æ‡’åŠ è½½ vs éæ‡’åŠ è½½

|**å¯¹æ¯”é¡¹**|**æ‡’åŠ è½½**|**éæ‡’åŠ è½½**|
|---|---|---|
|**åŠ è½½æ—¶æœº**|è®¿é—®é¡µé¢æ—¶åŠ è½½|è¿›å…¥ç½‘ç«™æ—¶ä¸€æ¬¡æ€§åŠ è½½|
|**é¦–å±åŠ è½½**|**å¿«**ï¼ŒåªåŠ è½½å¿…è¦ä»£ç |**æ…¢**ï¼ŒåŠ è½½æ‰€æœ‰ç»„ä»¶|
|**é€‚ç”¨åœºæ™¯**|**å¤§é¡¹ç›®**ï¼Œé¡µé¢è¾ƒå¤š|**å°é¡¹ç›®**ï¼Œé¡µé¢å°‘|
|**ç½‘ç»œè¯·æ±‚**|è®¿é—®ä¸åŒé¡µé¢è§¦å‘è¯·æ±‚|åªè¯·æ±‚ä¸€æ¬¡|

ğŸš€ **ç»“è®º**ï¼š
- **æ¨èæ‡’åŠ è½½**ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚
- **å°é¡¹ç›®ï¼ˆ1-2 é¡µï¼‰** å¯ä½¿ç”¨**éæ‡’åŠ è½½**ï¼ˆ`import xxx from "..."`ï¼‰ã€‚

---

### 5. è¿›é˜¶ï¼šè·¯ç”±æ‡’åŠ è½½ + KeepAlive

Vue 3 **ç»“åˆ `keep-alive` ç¼“å­˜ç»„ä»¶**ï¼Œé¿å…é‡å¤åŠ è½½ï¼š
```vue
<template>
  <keep-alive>
    <router-view v-slot="{ Component }">
      <component :is="Component" />
    </router-view>
  </keep-alive>
</template>
```

ğŸ“Œ **ä¼˜ç‚¹**

- **æ‡’åŠ è½½å‡å°‘é¦–å±å‹åŠ›**ã€‚
- **`keep-alive` é¿å…é¡µé¢åˆ‡æ¢æ—¶é‡æ–°åŠ è½½ç»„ä»¶**ï¼Œæå‡ä½“éªŒã€‚

---

### 6. ç»“è®º

|**æ‡’åŠ è½½æ–¹å¼**|**é€‚ç”¨åœºæ™¯**|**å®ç°æ–¹å¼**|
|---|---|---|
|**import() åŠ¨æ€åŠ è½½**|**æœ€å¸¸ç”¨**ï¼Œé»˜è®¤æ–¹å¼|`() => import("@/views/Home.vue")`|
|**defineAsyncComponent()**|**å¼‚æ­¥åŠ è½½ç»„ä»¶**|`defineAsyncComponent(() => import("xxx"))`|
|**å¸¦ loading å’Œ error å¤„ç†**|**ç½‘ç»œæ…¢æˆ–å¤±è´¥æ—¶**|`defineAsyncComponent({ loader, loadingComponent, errorComponent })`|
|**webpackChunkName**|**è‡ªå®šä¹‰æ‰“åŒ…æ–‡ä»¶å**|`/* webpackChunkName: "home" */`|
|**keep-alive + æ‡’åŠ è½½**|**é¿å…é‡å¤åŠ è½½**|`<keep-alive><router-view/></keep-alive>`|

ğŸš€ **æ¨èåšæ³•**
1. **æ‰€æœ‰è·¯ç”±ç»„ä»¶ä½¿ç”¨æ‡’åŠ è½½ `import()`**
2. **åˆ—è¡¨é¡µ + è¯¦æƒ…é¡µç»“åˆ `keep-alive`**
3. **ç½‘ç»œæ…¢æ—¶ï¼Œä½¿ç”¨ `loadingComponent` æç¤º**

âœ¨ **åˆç†ä½¿ç”¨æ‡’åŠ è½½ï¼Œå¯æ˜¾è‘—ä¼˜åŒ– Vue 3 åº”ç”¨æ€§èƒ½ï¼ğŸš€**
## 2. è·¯ç”±çš„hashå’Œhistoryæ¨¡å¼çš„åŒºåˆ«

Vue Router æä¾›äº†ä¸¤ç§ä¸»è¦çš„è·¯ç”±æ¨¡å¼ï¼š

1. **`hash` æ¨¡å¼ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰**
2. **`history` æ¨¡å¼**

è¿™ä¸¤ç§æ¨¡å¼çš„ä¸»è¦åŒºåˆ«åœ¨äº**URL ç»“æ„ã€å·¥ä½œåŸç†ã€å…¼å®¹æ€§ã€SEO ä»¥åŠåˆ·æ–°è¡Œä¸º**ã€‚

---

### 1. `hash` æ¨¡å¼

#### URL ç»“æ„
```sh
http://example.com/#/home
```

ğŸ“Œ **ç‰¹ç‚¹**
- **`#` åé¢çš„éƒ¨åˆ†ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨**ï¼Œæµè§ˆå™¨ä¸ä¼šåˆ·æ–°é¡µé¢ã€‚
- ä¸»è¦ä¾èµ– **`window.onhashchange`** ç›‘å¬ `#` å˜åŒ–ï¼Œå®ç°å‰ç«¯è·¯ç”±ã€‚

#### `hash` æ¨¡å¼çš„åŸç†

- `window.location.hash` ä»£è¡¨ `#` åé¢çš„è·¯å¾„éƒ¨åˆ†ã€‚
- Vue ç›‘å¬ `hashchange` äº‹ä»¶ï¼Œå®ç°è·¯ç”±åˆ‡æ¢ï¼š
```js
window.addEventListener("hashchange", () => {
  console.log("Hash å˜åŒ–:", window.location.hash);
});
```
- æœåŠ¡å™¨**ä¸ä¼šæ¥ç®¡ `#` ä¹‹åçš„éƒ¨åˆ†**ï¼Œæ‰€ä»¥åˆ·æ–°é¡µé¢ä¸ä¼š 404ã€‚

#### `hash` æ¨¡å¼çš„ä¼˜ç¼ºç‚¹

âœ… **ä¼˜ç‚¹**
- **å…¼å®¹æ€§å¥½**ï¼ˆæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ `hash`ï¼‰ã€‚
- **æ— éœ€æœåŠ¡å™¨é…ç½®**ï¼Œç›´æ¥å¯ç”¨ã€‚
- **åˆ·æ–°ä¸ä¼š 404**ï¼Œå› ä¸º `#` åçš„å†…å®¹ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚

âŒ **ç¼ºç‚¹**
- **URL ç»“æ„ä¸ç¾è§‚**ï¼Œå¸¦æœ‰ `#`ã€‚
- **å½±å“ SEO**ï¼Œæœç´¢å¼•æ“ä¸è¯†åˆ« `#` ä¹‹åçš„å†…å®¹ï¼ˆé™¤é **SSR**ï¼‰ã€‚

#### `hash` æ¨¡å¼ç¤ºä¾‹
```js
import { createRouter, createWebHashHistory } from "vue-router";

const router = createRouter({
  history: createWebHashHistory(), // ä½¿ç”¨ hash æ¨¡å¼
  routes: [
    { path: "/home", component: Home },
    { path: "/about", component: About }
  ]
});
```

ğŸ“Œ **æœ€ç»ˆçš„ URL**
```sh
http://example.com/#/home
```

---

### 2. `history` æ¨¡å¼

#### URL ç»“æ„
```sh
http://example.com/home
```

ğŸ“Œ **ç‰¹ç‚¹**

- é‡‡ç”¨ **HTML5 History API**ï¼ˆ`pushState()` å’Œ `replaceState()`ï¼‰ã€‚
- **æ²¡æœ‰ `#`ï¼ŒURL ç»“æ„æ›´ç¾è§‚**ã€‚
- ä¾èµ– **æœåŠ¡å™¨ç«¯æ”¯æŒ**ï¼Œå¦åˆ™åˆ·æ–°ä¼š 404ã€‚

#### `history` æ¨¡å¼çš„åŸç†

- Vue Router ä½¿ç”¨ `history.pushState()` ä¿®æ”¹æµè§ˆå™¨åœ°å€ï¼š
```js
history.pushState(null, "", "/home");
```

- ç›‘å¬ `popstate` äº‹ä»¶ï¼Œå®ç°è·¯ç”±è·³è½¬ï¼š
```js
window.addEventListener("popstate", () => {
  console.log("History å˜åŒ–:", window.location.pathname);
});
```

- **æœåŠ¡å™¨ç«¯éœ€è¦é…ç½® `fallback` è§„åˆ™**ï¼Œå¦åˆ™**åˆ·æ–°ä¼š 404**ã€‚

####  `history` æ¨¡å¼çš„ä¼˜ç¼ºç‚¹

âœ… **ä¼˜ç‚¹**
- **URL ç»“æ„æ¸…æ™°ï¼Œæ²¡æœ‰ `#`ï¼Œæ›´ç¬¦åˆ RESTful è§„èŒƒ**ã€‚
- **æ›´å¥½çš„ SEO**ï¼Œæœç´¢å¼•æ“å¯ä»¥è¯†åˆ«å®Œæ•´è·¯å¾„ï¼ˆé€‚ç”¨äº SSRï¼‰ã€‚
- **ç”¨æˆ·ä½“éªŒæ›´å¥½**ï¼Œç±»ä¼¼åŸç”Ÿç½‘ç«™çš„å¯¼èˆªæ–¹å¼ã€‚

âŒ **ç¼ºç‚¹**
- **éœ€è¦æœåŠ¡å™¨ç«¯é…ç½®**ï¼Œå¦åˆ™åˆ·æ–°æ—¶ä¼š 404ã€‚
- **ä¸æ”¯æŒ IE9 åŠä»¥ä¸‹ç‰ˆæœ¬**ï¼ˆä¸æ”¯æŒ `pushState`ï¼‰ã€‚

#### `history` æ¨¡å¼ç¤ºä¾‹
```js
import { createRouter, createWebHistory } from "vue-router";

const router = createRouter({
  history: createWebHistory(), // ä½¿ç”¨ history æ¨¡å¼
  routes: [
    { path: "/home", component: Home },
    { path: "/about", component: About }
  ]
});
```

ğŸ“Œ **æœ€ç»ˆçš„ URL**
```sh
http://example.com/home
```

---

### 3. `history` æ¨¡å¼å¦‚ä½•é¿å…åˆ·æ–° 404

ç”±äº `history` æ¨¡å¼å»æ‰äº† `#`ï¼Œå½“ç”¨æˆ·**ç›´æ¥è®¿é—®** `http://example.com/home`ï¼ŒæœåŠ¡å™¨ä¼šå°è¯•**è¿”å› `home` è¿™ä¸ªæ–‡ä»¶**ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› 404ã€‚
#### âœ… è§£å†³æ–¹æ¡ˆï¼šæœåŠ¡å™¨é…ç½®é‡å®šå‘

- **Apache**
```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
```

- **Nginx**
```nginx
location / {
  try_files $uri /index.html;
}
```

- **Node.js Express**
```js
app.use((req, res, next) => {
  res.sendFile(path.resolve(__dirname, "dist/index.html"));
});
```


ğŸ“Œ **ä½œç”¨**
- **æ‰€æœ‰è·¯ç”±è¯·æ±‚éƒ½é‡å®šå‘åˆ° `index.html`**ï¼Œç„¶å Vue Router å†è§£æè·¯ç”±ã€‚

---

### 4. `hash` vs `history` å¯¹æ¯”

|**å¯¹æ¯”é¡¹**|**`hash` æ¨¡å¼**|**`history` æ¨¡å¼**|
|---|---|---|
|**URL ç»“æ„**|`http://example.com/#/home`|`http://example.com/home`|
|**å®ç°æ–¹å¼**|`window.onhashchange` ç›‘å¬ `#` å˜åŒ–|`history.pushState()`|
|**åˆ·æ–° 404**|âŒ ä¸ä¼š 404|âœ… éœ€è¦æœåŠ¡å™¨é…ç½®|
|**å…¼å®¹æ€§**|âœ… æ‰€æœ‰æµè§ˆå™¨æ”¯æŒ|âŒ IE9 åŠä»¥ä¸‹ä¸æ”¯æŒ|
|**SEO å‹å¥½æ€§**|âŒ ä¸æ”¯æŒ|âœ… é€‚ç”¨äº SSR|
|**ä½¿ç”¨åœºæ™¯**|é€‚ç”¨äº**æ— éœ€æœåŠ¡å™¨é…ç½®çš„å°é¡¹ç›®**|é€‚ç”¨äº**SEO å‹å¥½çš„å¤§é¡¹ç›®**|

---

### 5. ä»€ä¹ˆæ—¶å€™é€‰æ‹© `hash` æ¨¡å¼ or `history` æ¨¡å¼ï¼Ÿ

âœ… **`hash` æ¨¡å¼é€‚ç”¨äºï¼š**
- **å°å‹é¡¹ç›®**ï¼Œæ— éœ€æœåŠ¡å™¨é…ç½®ã€‚
- **ä¸éœ€è¦ SEO**ï¼Œå¦‚åå°ç®¡ç†ç³»ç»Ÿã€‚
- **å…¼å®¹æ€§è¦æ±‚é«˜ï¼ˆæ”¯æŒè€æ—§æµè§ˆå™¨ï¼‰**ã€‚

âœ… **`history` æ¨¡å¼é€‚ç”¨äºï¼š**
- **SEO éœ€æ±‚é«˜**ï¼Œå¦‚åšå®¢ã€ä¼ä¸šå®˜ç½‘ï¼ˆç»“åˆ SSRï¼‰ã€‚
- **æœ‰æœåŠ¡å™¨æ”¯æŒ**ï¼Œå¯ä»¥é…ç½® Nginx/Apacheã€‚
- **æ›´ç¬¦åˆ RESTful é£æ ¼ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½**ã€‚

---

### 6. ç»“è®º

- `hash` æ¨¡å¼ç®€å•æ˜“ç”¨ï¼Œä¸éœ€è¦æœåŠ¡å™¨é…ç½®ï¼Œä½† URL å¸¦ `#`ï¼ŒSEO ä¸å‹å¥½ã€‚
- `history` æ¨¡å¼ URL æ›´æ¸…æ™°ï¼ŒSEO å‹å¥½ï¼Œä½†éœ€è¦ **æœåŠ¡å™¨ç«¯é…ç½®** é˜²æ­¢åˆ·æ–° 404ã€‚
- **æ¨èï¼š**
    - **åå°ç®¡ç†ç³»ç»Ÿ**ï¼ˆå¦‚ Vue Adminï¼‰ï¼š`hash` æ¨¡å¼
    - **å®˜ç½‘ / å•†åŸ / éœ€ SEO é¡µé¢**ï¼ˆå¦‚ Vue SSRï¼‰ï¼š`history` æ¨¡å¼ï¼ˆç»“åˆ Nuxt.jsï¼‰

ğŸš€ **Vue Router é»˜è®¤ä½¿ç”¨ `hash` æ¨¡å¼ï¼Œå¦‚æœ‰ SEO éœ€æ±‚ï¼Œå»ºè®®ä½¿ç”¨ `history` æ¨¡å¼å¹¶é…ç½®æœåŠ¡å™¨æ”¯æŒï¼**
## 3.Â `$route å’Œ$router`Â çš„åŒºåˆ«
åœ¨ Vue Router ä¸­ï¼Œ`$route` å’Œ `$router` éƒ½æ˜¯**è·¯ç”±å¯¹è±¡**ï¼Œä½†å®ƒä»¬çš„ä½œç”¨ä¸åŒï¼š

| **å¯¹æ¯”é¡¹**   | **`$route`**               | **`$router`**                  |
| --------- | -------------------------- | ------------------------------ |
| **ä½œç”¨**    | å­˜å‚¨å½“å‰è·¯ç”±çš„ä¿¡æ¯ï¼ˆè·¯å¾„ã€å‚æ•°ç­‰ï¼‰          | è´Ÿè´£**è·¯ç”±å¯¼èˆª**ï¼ˆè·³è½¬ã€å‰è¿›ã€åé€€ï¼‰           |
| **æ•°æ®ç±»å‹**  | æ˜¯ä¸€ä¸ª**å¯¹è±¡**ï¼ˆåªè¯»ï¼‰              | æ˜¯ä¸€ä¸ª**Vue Router å®ä¾‹**ï¼ˆå¯æ“ä½œï¼‰      |
| **æ˜¯å¦å¯ä¿®æ”¹** | âŒ ä¸èƒ½ä¿®æ”¹ï¼ˆåªè¯»ï¼‰                 | âœ… å¯ç”¨äºç¼–ç¨‹å¼å¯¼èˆª                     |
| **å…¸å‹ç”¨æ³•**  | è·å– `path`ã€`params`ã€`query` | æ‰§è¡Œ `push()`ã€`replace()`ã€`go()` |
| åç§°        | è·¯ç”±                         | è·¯ç”±å™¨                            |

---

### 1. `$route` ï¼ˆè·¯ç”±ï¼‰

**`$route` æ˜¯ä¸€ä¸ªå¯¹è±¡**ï¼Œå­˜å‚¨å½“å‰è·¯ç”±çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
```js
$route = {
  path: "/home", // å½“å‰è·¯å¾„
  name: "home", // è·¯ç”±åç§°
  params: {}, // è·¯ç”±å‚æ•°
  query: {}, // æŸ¥è¯¢å‚æ•°
  fullPath: "/home?user=123", // å®Œæ•´è·¯å¾„
  hash: "#section1", // å“ˆå¸Œå€¼
  matched: [], // åŒ¹é…çš„è·¯ç”±è®°å½•
}
```

#### âœ… ç¤ºä¾‹ï¼šè·å–å½“å‰è·¯å¾„
```vue
<template>
  <div>å½“å‰è·¯å¾„: {{ $route.path }}</div>
</template>
```

ğŸ“Œ **ç¤ºä¾‹ URL**
```sh
http://example.com/home?user=123
```

ğŸ“Œ **ç»“æœ**
```sh
å½“å‰è·¯å¾„: /home
```

#### âœ… ç¤ºä¾‹ï¼šè·å– `query` å‚æ•°
```vue
<template>
  <div>æŸ¥è¯¢å‚æ•°: {{ $route.query.user }}</div>
</template>
```

ğŸ“Œ **ç»“æœ**
```sh
æŸ¥è¯¢å‚æ•°: 123
```

---

### 2. `$router` ï¼ˆè·¯ç”±å™¨ï¼‰

**`$router` æ˜¯ `Vue Router` çš„å®ä¾‹**ï¼Œæä¾›è·¯ç”±æ§åˆ¶æ–¹æ³•ï¼š

|**æ–¹æ³•**|**ä½œç”¨**|
|---|---|
|`$router.push()`|**è·³è½¬åˆ°æ–°é¡µé¢ï¼ˆå¯å›é€€ï¼‰**|
|`$router.replace()`|**è·³è½¬ä½†ä¸ä¿ç•™å†å²è®°å½•**|
|`$router.go(n)`|**å‰è¿› / åé€€ `n` æ­¥**|
|`$router.back()`|**è¿”å›ä¸Šä¸€é¡µ**|
|`$router.forward()`|**å‰è¿›ä¸€é¡µ**|

#### âœ… ç¤ºä¾‹ï¼šç¼–ç¨‹å¼å¯¼èˆª

##### (1) `push()`ï¼ˆå¸¦å‚æ•°è·³è½¬ï¼‰
```vue
<button @click="$router.push('/about')">è·³è½¬åˆ° About</button>
```

ğŸ“Œ **ç›¸å½“äº**
```js
this.$router.push({ path: "/about" });
```

---

##### (2) `push()` ä¼ é€’ `params`
```js
this.$router.push({ name: "user", params: { id: 123 } });
```

ğŸ“Œ **ç”Ÿæˆçš„ URL**
```sh
http://example.com/user/123
```

---

##### (3) `push()` ä¼ é€’ `query`
```js
this.$router.push({ path: "/home", query: { user: "Alice" } });
```

ğŸ“Œ **ç”Ÿæˆçš„ URL**
```sh
http://example.com/home?user=Alice
```

---

##### (4) `replace()`ï¼ˆæ›¿æ¢å½“å‰å†å²è®°å½•ï¼‰
```vue
<button @click="$router.replace('/dashboard')">è·³è½¬åˆ° Dashboard</button>
```

ğŸ“Œ **åŒºåˆ«**

- `push()`ï¼šä¼šåœ¨æµè§ˆå™¨**å†å²è®°å½•ä¸­æ·»åŠ æ–°è®°å½•**ï¼ˆå¯å›é€€ï¼‰ã€‚
- `replace()`ï¼š**æ›¿æ¢å½“å‰é¡µé¢**ï¼Œä¸ä¼šç”Ÿæˆå†å²è®°å½•ï¼ˆæ— æ³•å›é€€ï¼‰ã€‚

---

##### (5) `go(n)`ï¼ˆå‰è¿› / åé€€ `n` æ­¥ï¼‰
```vue
<button @click="$router.go(-1)">è¿”å›ä¸Šä¸€é¡µ</button>
```

ğŸ“Œ **æ•ˆæœ**

- `this.$router.go(-1)` ç›¸å½“äº `window.history.back()`
- `this.$router.go(1)` ç›¸å½“äº `window.history.forward()`

---

### 3. `$route` vs `$router` å¯¹æ¯”æ€»ç»“

|**å¯¹æ¯”é¡¹**|**`$route`ï¼ˆå½“å‰è·¯ç”±ä¿¡æ¯ï¼‰**|**`$router`ï¼ˆè·¯ç”±æ§åˆ¶ï¼‰**|
|---|---|---|
|**ä½œç”¨**|**è·å–å½“å‰è·¯ç”±ä¿¡æ¯**|**æ‰§è¡Œå¯¼èˆªæ“ä½œ**|
|**æ˜¯å¦å¯ä¿®æ”¹**|âŒ åªè¯»|âœ… å¯æ“ä½œ|
|**å…¸å‹ç”¨æ³•**|`this.$route.path`ã€`this.$route.query`|`this.$router.push()`ã€`this.$router.go(-1)`|
|**ä½¿ç”¨åœºæ™¯**|æ˜¾ç¤ºè·¯å¾„ã€å‚æ•°|è¿›è¡Œé¡µé¢è·³è½¬|

---

### 4. Vue 3 `setup()` ä¸­å¦‚ä½•ä½¿ç”¨ï¼Ÿ

Vue 3 å–æ¶ˆäº† `this`ï¼Œå¯ä»¥ç”¨ `useRoute()` å’Œ `useRouter()` ä»£æ›¿ï¼š
```vue
<script setup>
import { useRoute, useRouter } from "vue-router";

const route = useRoute(); // ç­‰ä»·äº this.$route
const router = useRouter(); // ç­‰ä»·äº this.$router

// è·å–å½“å‰è·¯å¾„
console.log(route.path);

// è·³è½¬è·¯ç”±
const goToAbout = () => {
  router.push("/about");
};
</script>
```

---

### 5. ç»“è®º

- **`$route`ï¼ˆuseRouteï¼‰** ç”¨äº **è·å–è·¯ç”±ä¿¡æ¯**ï¼Œä¸èƒ½ä¿®æ”¹ï¼š
```js
console.log($route.path); // "/home"
console.log($route.query); // { user: "Alice" }
```

- **`$router`ï¼ˆuseRouterï¼‰** ç”¨äº **è·³è½¬è·¯ç”±**ï¼š
```js
this.$router.push("/about"); // è·³è½¬åˆ° About é¡µé¢
this.$router.replace("/dashboard"); // æ›¿æ¢å½“å‰é¡µé¢
this.$router.go(-1); // è¿”å›ä¸Šä¸€é¡µ
```


ğŸš€ **æ¨è**
- **è·å–è·¯ç”±ä¿¡æ¯** â†’ `useRoute()`
- **è¿›è¡Œè·¯ç”±è·³è½¬** â†’ `useRouter()`

**æŒæ¡ `$route` å’Œ `$router`ï¼Œå¯ä»¥æ›´å¥½åœ°ç®¡ç† Vue Routerï¼ğŸš€**
## 5. å¦‚ä½•å®šä¹‰åŠ¨æ€è·¯ç”±ï¼Ÿå¦‚ä½•è·å–ä¼ è¿‡æ¥çš„åŠ¨æ€å‚æ•°ï¼Ÿ
åŠ¨æ€è·¯ç”±ï¼ˆDynamic Routingï¼‰å…è®¸åœ¨**è·¯å¾„ä¸­ä½¿ç”¨å˜é‡**ï¼Œä»è€Œåˆ›å»º**å¯å¤ç”¨çš„è·¯ç”±**ã€‚è¿™å¯¹äº**è¯¦æƒ…é¡µã€ç”¨æˆ·é¡µé¢ã€åˆ†ç±»é¡µé¢**ç­‰éå¸¸æœ‰ç”¨ã€‚

---

### 1. å®šä¹‰åŠ¨æ€è·¯ç”±

åœ¨ Vue Router ä¸­ï¼ŒåŠ¨æ€è·¯ç”±å‚æ•°ä½¿ç”¨ **`:`** è¯­æ³•ï¼š

```js
import { createRouter, createWebHistory } from "vue-router";
import User from "@/views/User.vue";

const routes = [
  { path: "/user/:id", component: User }
];

const router = createRouter({
  history: createWebHistory(),
  routes
});

export default router;
```

ğŸ“Œ **è¯´æ˜**

- `:id` æ˜¯ä¸€ä¸ª**åŠ¨æ€å‚æ•°**ï¼Œå¯ä»¥åŒ¹é… `/user/123`ã€`/user/456` ç­‰ä¸åŒ URLã€‚
- åœ¨ `User.vue` ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è·å– `id`ã€‚

---

### 2. è·å–åŠ¨æ€è·¯ç”±å‚æ•°

#### âœ… æ–¹æ³• 1ï¼šä½¿ç”¨ `$route.params`

**é€‚ç”¨äº Vue 2 å’Œ Vue 3ï¼ˆé€‰é¡¹ APIï¼‰**
```vue
<template>
  <div>
    <h2>ç”¨æˆ· ID: {{ $route.params.id }}</h2>
  </div>
</template>

<script>
export default {
  mounted() {
    console.log("ç”¨æˆ· ID:", this.$route.params.id);
  }
};
</script>
```

ğŸ“Œ **ç¤ºä¾‹ URL**
```
http://example.com/user/123
```

ğŸ“Œ **è¾“å‡º**
```
ç”¨æˆ· ID: 123
```

---

#### âœ… æ–¹æ³• 2ï¼šä½¿ç”¨ `useRoute()`ï¼ˆVue 3 Composition APIï¼‰

```vue
<template>
  <div>
    <h2>ç”¨æˆ· ID: {{ route.params.id }}</h2>
  </div>
</template>

<script setup>
import { useRoute } from "vue-router";

const route = useRoute();
console.log("ç”¨æˆ· ID:", route.params.id);
</script>
```

ğŸ“Œ **Vue 3 æ¨èä½¿ç”¨ `useRoute()` ä»£æ›¿ `this.$route`ã€‚**

---

### 3. åŠ¨æ€è·¯ç”±ä¼ é€’å¤šä¸ªå‚æ•°

å¯ä»¥åœ¨è·¯å¾„ä¸­æ·»åŠ å¤šä¸ªå‚æ•°ï¼š
```js
{ path: "/user/:id/:name", component: User }
```

ğŸ“Œ **ç¤ºä¾‹ URL**
```
http://example.com/user/123/Alice
```

ğŸ“Œ **è·å–å‚æ•°**
```vue
<template>
  <div>
    <h2>ç”¨æˆ· ID: {{ $route.params.id }}</h2>
    <h2>ç”¨æˆ·å: {{ $route.params.name }}</h2>
  </div>
</template>
```

ğŸ“Œ **è¾“å‡º**
```
ç”¨æˆ· ID: 123
ç”¨æˆ·å: Alice
```

---

### 4. ä½¿ç”¨ `props` ä¼ é€’åŠ¨æ€å‚æ•°

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`$route.params` åªèƒ½åœ¨ `this.$route` ä¸­è®¿é—®ã€‚Vue å…è®¸å°† **åŠ¨æ€å‚æ•°ä½œä¸º `props` ä¼ é€’ç»™ç»„ä»¶**ï¼Œè®©ç»„ä»¶æ›´åŠ è§£è€¦ï¼š

```js
{ path: "/user/:id", component: User, props: true }
```

ğŸ“Œ **ç»„ä»¶å†…ç›´æ¥æ¥æ”¶ `props`**

```vue
<template>
  <h2>ç”¨æˆ· ID: {{ id }}</h2>
</template>

<script setup>
defineProps(["id"]);
</script>
```

ğŸ“Œ **ä¼˜ç‚¹**

- ç»„ä»¶æ›´åŠ æ¸…æ™°ï¼Œ**æ— éœ€è®¿é—® `$route.params`**ã€‚
- æ›´æ˜“æµ‹è¯•å’Œå¤ç”¨ã€‚

---

## 5. ç¼–ç¨‹å¼è·³è½¬ï¼ˆåŠ¨æ€å‚æ•°ï¼‰

#### âœ… ä½¿ç”¨ `$router.push()`

```vue
<button @click="$router.push('/user/456')">è·³è½¬åˆ°ç”¨æˆ· 456</button>
```

ğŸ“Œ **ç­‰ä»·äº**
```js
this.$router.push({ path: `/user/456` });
```

---

#### âœ… ä¼ é€’å‚æ•°

```js
this.$router.push({ name: "user", params: { id: 789 } });
```

ğŸ“Œ **æ³¨æ„**

- `name` å¿…é¡»åŒ¹é… `routes` é‡Œçš„ `name`ï¼š
```js
{ path: "/user/:id", name: "user", component: User }
```

- **é¿å…ä½¿ç”¨ `path` + `params` ä¸€èµ·ä½¿ç”¨**
```js
this.$router.push({ path: "/user", params: { id: 789 } }); // âŒ æ— æ•ˆ
```

**âœ… æ­£ç¡®å†™æ³•**
```js
this.$router.push({ name: "user", params: { id: 789 } });
```


---

### 6. ç›‘å¬åŠ¨æ€å‚æ•°å˜åŒ–

### **âœ… `watch()` ç›‘å¬ `params` å˜åŒ–**

å½“ `id` å˜åŒ–æ—¶ï¼Œæ‰§è¡Œé€»è¾‘ï¼š
```vue
<script setup>
import { useRoute, watch } from "vue-router";

const route = useRoute();

watch(
  () => route.params.id,
  (newId, oldId) => {
    console.log("ç”¨æˆ· ID å˜åŒ–:", oldId, "->", newId);
  }
);
</script>
```

ğŸ“Œ **Vue 3 æ¨è `watch()` ç›‘å¬ `route.params.id`ï¼Œé¿å…é‡æ–°åŠ è½½ç»„ä»¶ã€‚**

---

### 7. åŒ¹é…å¯é€‰å‚æ•°

å¦‚æœ `:id` ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥ä½¿ç”¨ `?`ï¼š
```js
{ path: "/user/:id?", component: User }
```

ğŸ“Œ **ç¤ºä¾‹ URL**
```
http://example.com/user      âœ… å…è®¸
http://example.com/user/123  âœ… å…è®¸
```

ğŸ“Œ **è·å–å‚æ•°**
```js
console.log(this.$route.params.id); // å¯èƒ½æ˜¯ undefined
```

---

### 8. 404 åŒ¹é…ï¼ˆé€šé…ç¬¦ `*`ï¼‰

å¦‚æœç”¨æˆ·è®¿é—®äº†**æœªå®šä¹‰çš„è·¯ç”±**ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ `/:pathMatch(.*)*`ï¼š

```js
{ path: "/:pathMatch(.*)*", name: "NotFound", component: NotFound }
```

ğŸ“Œ **ç¤ºä¾‹**
```
http://example.com/unknown  -> æ¸²æŸ“ NotFound ç»„ä»¶
```

---

### 9. `redirect`ï¼ˆé‡å®šå‘åŠ¨æ€è·¯ç”±ï¼‰

å¦‚æœç”¨æˆ·è®¿é—® `/profile/:id`ï¼Œæƒ³è®©å…¶**é‡å®šå‘**åˆ° `/user/:id`ï¼š
```js
{ path: "/profile/:id", redirect: "/user/:id" }
```

ğŸ“Œ **æ”¯æŒå‡½æ•°**
```js
{
  path: "/profile/:id",
  redirect: (to) => {
    return `/user/${to.params.id}`;
  }
}
```

---

### 10. ç»“è®º

|**åŠŸèƒ½**|**å®ç°æ–¹å¼**|
|---|---|
|**å®šä¹‰åŠ¨æ€è·¯ç”±**|`{ path: "/user/:id" }`|
|**è·å–å‚æ•°ï¼ˆVue 2ï¼‰**|`this.$route.params.id`|
|**è·å–å‚æ•°ï¼ˆVue 3ï¼‰**|`const route = useRoute(); route.params.id`|
|**ç›‘å¬å‚æ•°å˜åŒ–**|`watch(() => route.params.id, callback)`|
|**ç¼–ç¨‹å¼å¯¼èˆª**|`this.$router.push({ name: "user", params: { id: 123 } })`|
|**é€šé…ç¬¦ 404**|`{ path: "/:pathMatch(.*)*", component: NotFound }`|

ğŸš€ **æ¨è**

- **Vue 3 ç»„ä»¶å†…è·å–å‚æ•°** â†’ `useRoute()`
- **é¿å… `path + params` ç»„åˆ** â†’ **ä½¿ç”¨ `name + params`**
- **ç›‘å¬å‚æ•°å˜åŒ–** â†’ **ç”¨ `watch()`**

âœ¨ **åŠ¨æ€è·¯ç”±è®© Vue Router æ›´çµæ´»ï¼Œé€‚ç”¨äºè¯¦æƒ…é¡µã€ç”¨æˆ·ä¸­å¿ƒã€æœç´¢ç»“æœç­‰åœºæ™¯ï¼ğŸš€**
## 6. Vue-Router è·¯ç”±é’©å­åœ¨ç”Ÿå‘½å‘¨æœŸçš„ä½“ç°

Vue Router æä¾›äº†**å…¨å±€ã€ç»„ä»¶å†…ã€å•ä¸ªè·¯ç”±ç‹¬äº«çš„å¯¼èˆªå®ˆå«ï¼ˆé’©å­ï¼‰**ï¼Œç”¨äºåœ¨**è·¯ç”±åˆ‡æ¢å‰å**æ‰§è¡Œé€»è¾‘ï¼Œå¦‚ï¼š

- **æƒé™éªŒè¯ï¼ˆç™»å½•æ£€æŸ¥ï¼‰**
- **é¡µé¢æ•°æ®é¢„åŠ è½½**
- **å–æ¶ˆè¯·æ±‚**
- **åˆ‡æ¢åŠ¨ç”»**

Vue ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸ Vue Router çš„**è·¯ç”±é’©å­ï¼ˆå¯¼èˆªå®ˆå«ï¼‰** å…³ç³»å¯†åˆ‡ï¼Œç‰¹åˆ«æ˜¯åœ¨**è·¯ç”±åˆ‡æ¢æ—¶**ï¼Œå¯¼èˆªå®ˆå«ä¼šå½±å“ç»„ä»¶çš„ **åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°å’Œé”€æ¯**ã€‚

---

### 1. Vue Router è·¯ç”±é’©å­ï¼ˆå¯¼èˆªå®ˆå«ï¼‰

Vue Router ä¸»è¦æœ‰ä¸‰ç±»è·¯ç”±é’©å­ï¼š

|**ç±»åˆ«**|**é’©å­å‡½æ•°**|**ä½œç”¨**|
|---|---|---|
|**å…¨å±€å®ˆå«**|`beforeEach`ã€`beforeResolve`ã€`afterEach`|ä½œç”¨äºæ‰€æœ‰è·¯ç”±|
|**è·¯ç”±ç‹¬äº«å®ˆå«**|`beforeEnter`|ä½œç”¨äºå•ä¸ªè·¯ç”±|
|**ç»„ä»¶å†…å®ˆå«**|`beforeRouteEnter`ã€`beforeRouteUpdate`ã€`beforeRouteLeave`|ä½œç”¨äºç»„ä»¶å†…|

---

### 2. å…¨å±€å®ˆå«çš„ç”Ÿå‘½å‘¨æœŸ

#### (1) `beforeEach`ï¼ˆè¿›å…¥è·¯ç”±å‰ï¼‰

- åœ¨**è·¯ç”±è·³è½¬å‰**æ‰§è¡Œï¼Œå¯ä»¥ç”¨äº **æƒé™æ ¡éªŒ**ã€**åˆ¤æ–­æ˜¯å¦ç™»å½•**ã€‚
- **ä¸ä¼šå½±å“ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ**ï¼Œå› ä¸ºæ­¤æ—¶ç»„ä»¶è¿˜æœªåˆ›å»ºã€‚

```js
router.beforeEach((to, from, next) => {
  console.log("å…¨å±€ beforeEach:", from.path, "->", to.path);
  if (to.meta.requiresAuth && !isLoggedIn()) {
    next("/login"); // æœªç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
  } else {
    next(); // å…è®¸é€šè¿‡
  }
});
```

ğŸ“Œ **ç¤ºä¾‹**
- è®¿é—® `/admin` æ—¶ï¼Œæ£€æŸ¥ `meta.requiresAuth`ï¼Œæœªç™»å½•åˆ™è·³è½¬ `/login`ã€‚

---

#### (2) `beforeResolve`ï¼ˆå¼‚æ­¥è¯·æ±‚å‰ï¼‰

- åœ¨ **è·¯ç”±åˆ‡æ¢å**ï¼Œ**ç»„ä»¶æ¸²æŸ“å‰** è§¦å‘ï¼Œé€‚ç”¨äº **è·å–å¼‚æ­¥æ•°æ®**ï¼ˆå¦‚ API è¯·æ±‚ï¼‰ã€‚
- **ç»„ä»¶æœªåˆ›å»ºï¼Œæ— æ³•è®¿é—® `this`**ã€‚
```js
router.beforeResolve(async (to, from, next) => {
  console.log("å…¨å±€ beforeResolve:", to.path);
  await fetchData(); // é¢„åŠ è½½æ•°æ®
  next();
});
```

ğŸ“Œ **é€‚ç”¨äº**
- åœ¨ `beforeResolve` é‡Œè°ƒç”¨ `await fetchData()`ï¼Œ**ç¡®ä¿é¡µé¢åŠ è½½å‰æ•°æ®å°±ç»ª**

---

#### (3) `afterEach`ï¼ˆè·¯ç”±åˆ‡æ¢å®Œæˆï¼‰

- **è·¯ç”±åˆ‡æ¢å** è§¦å‘ï¼Œé€‚ç”¨äº**ç»Ÿè®¡åŸ‹ç‚¹**ã€**ä¿®æ”¹æ ‡é¢˜**ã€‚
- **ä¸ä¼šå½±å“ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ**ï¼Œä¸ä¼šé˜»æ­¢å¯¼èˆªã€‚

```js
router.afterEach((to) => {
  console.log("å…¨å±€ afterEach:", to.path);
  document.title = to.meta.title || "é»˜è®¤æ ‡é¢˜";
});
```

ğŸ“Œ **é€‚ç”¨äº**

- è®°å½•**è®¿é—®æ—¥å¿—**ï¼Œæ¯”å¦‚ Google Analyticsã€‚
- **åŠ¨æ€ä¿®æ”¹é¡µé¢æ ‡é¢˜**ï¼ˆ`document.title = to.meta.title`ï¼‰ã€‚

---

### 3. å•ä¸ªè·¯ç”±ç‹¬äº« `beforeEnter`

- **åªä½œç”¨äºå½“å‰è·¯ç”±**ï¼Œç»„ä»¶è¿˜æœªåˆ›å»ºã€‚
- **ç”¨äºå•ä¸ªé¡µé¢æƒé™æ ¡éªŒ**ï¼Œæ¯”å¦‚**é™åˆ¶ `/admin` è®¿é—®**ã€‚

```js
const routes = [
  {
    path: "/admin",
    component: Admin,
    beforeEnter: (to, from, next) => {
      console.log("è·¯ç”±ç‹¬äº« beforeEnter:", to.path);
      if (!isAdmin()) {
        next("/403"); // æƒé™ä¸è¶³ï¼Œè·³è½¬ 403
      } else {
        next();
      }
    }
  }
];
```

ğŸ“Œ **é€‚ç”¨äº**

- **é™åˆ¶ç®¡ç†å‘˜è®¿é—®** `/admin`ï¼Œéç®¡ç†å‘˜è·³è½¬ `/403`ã€‚

---

### 4. ç»„ä»¶å†…å®ˆå«çš„ç”Ÿå‘½å‘¨æœŸ

**ç»„ä»¶çš„ `beforeRouteEnter`ã€`beforeRouteUpdate`ã€`beforeRouteLeave` ç›´æ¥å½±å“ç»„ä»¶çš„åˆ›å»ºã€æ›´æ–°å’Œé”€æ¯**ã€‚

|**é’©å­å‡½æ•°**|**è§¦å‘æ—¶æœº**|**èƒ½å¦è®¿é—® `this`ï¼ˆç»„ä»¶å®ä¾‹ï¼‰**|
|---|---|---|
|`beforeRouteEnter`|è¿›å…¥å‰ï¼Œç»„ä»¶æœªåˆ›å»º|âŒï¼ˆéœ€ `next(vm => vm.xxx)`ï¼‰|
|`beforeRouteUpdate`|å¤ç”¨ç»„ä»¶æ—¶ï¼ˆå‚æ•°å˜åŒ–ï¼‰|âœ…|
|`beforeRouteLeave`|ç¦»å¼€å‰|âœ…|

---

#### (1) `beforeRouteEnter`ï¼ˆè¿›å…¥ç»„ä»¶å‰ï¼‰

- **ç»„ä»¶æœªåˆ›å»ºï¼Œæ— æ³•è®¿é—® `this`**ã€‚
- **é€‚ç”¨äºå¼‚æ­¥æ•°æ®é¢„åŠ è½½**ï¼Œæ¯”å¦‚ **è¿›å…¥è¯¦æƒ…é¡µå‰è¯·æ±‚æ•°æ®**ã€‚
```vue
<script setup>
import { onBeforeRouteEnter } from "vue-router";

onBeforeRouteEnter((to, from, next) => {
  console.log("ç»„ä»¶ beforeRouteEnter:", to.path);
  fetchData().then(() => next());
});
</script>
```

ğŸ“Œ **æ³¨æ„**
- `this` è¿˜ä¸å¯ç”¨ï¼Œå¯ä»¥ç”¨ `next(vm => vm.xxx)` è®¿é—®ç»„ä»¶å®ä¾‹ï¼š
```js
beforeRouteEnter(to, from, next) {
  next(vm => {
    console.log("å¯ä»¥è®¿é—® this:", vm);
  });
}
```


---

#### (2) `beforeRouteUpdate`ï¼ˆå¤ç”¨ç»„ä»¶æ—¶ï¼‰

- **å½“å‚æ•°å˜åŒ–æ—¶**ï¼ˆå¦‚ `/user/1` â†’ `/user/2`ï¼‰ï¼Œç»„ä»¶ä¸é‡æ–°åˆ›å»ºï¼Œè€Œæ˜¯å¤ç”¨**ï¼Œæ­¤æ—¶ä¼šè§¦å‘ `beforeRouteUpdate`**ã€‚
- **é€‚ç”¨äºç›‘å¬ `id` å˜åŒ–ï¼Œå¹¶é‡æ–°è¯·æ±‚æ•°æ®**ã€‚

```vue
<script setup>
import { onBeforeRouteUpdate } from "vue-router";

onBeforeRouteUpdate((to, from) => {
  console.log("ç»„ä»¶ beforeRouteUpdate:", to.path);
  fetchUserData(to.params.id);
});
</script>
```

ğŸ“Œ **é€‚ç”¨äº**
- `/user/:id` â†’ `/user/:id` åˆ‡æ¢æ—¶ï¼Œç»„ä»¶ä¸é”€æ¯ï¼Œæ‰‹åŠ¨åŠ è½½æ–°ç”¨æˆ·æ•°æ®ã€‚

---

#### (3) `beforeRouteLeave`ï¼ˆç¦»å¼€ç»„ä»¶å‰ï¼‰

- **é€‚ç”¨äº**ï¼šç¦»å¼€é¡µé¢æ—¶ï¼Œæç¤º**æœªä¿å­˜æ•°æ®**ï¼Œæˆ–**å–æ¶ˆå®šæ—¶å™¨**ã€‚
```vue
<script setup>
import { onBeforeRouteLeave } from "vue-router";

onBeforeRouteLeave((to, from, next) => {
  if (!confirm("ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿæœªä¿å­˜æ•°æ®å°†ä¸¢å¤±")) {
    next(false); // å–æ¶ˆå¯¼èˆª
  } else {
    next();
  }
});
</script>
```

ğŸ“Œ **é€‚ç”¨äº**

- **è¡¨å•ç¼–è¾‘é¡µ**ï¼Œç”¨æˆ·ç¦»å¼€å‰ç»™å‡ºæç¤ºã€‚
- **æ¸…ç†å®šæ—¶å™¨ã€WebSocket è¿æ¥**ã€‚

---

### 5. Vue Router é’©å­å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å…³ç³»

**å®Œæ•´æ‰§è¡Œé¡ºåºï¼ˆè¿›å…¥æ–°é¡µé¢ï¼‰**
```sh
beforeEach â†’ beforeEnter â†’ beforeRouteEnter â†’ created â†’ beforeMount â†’ mounted â†’ afterEach â†’ beforeResolve
```

**å®Œæ•´æ‰§è¡Œé¡ºåºï¼ˆç¦»å¼€é¡µé¢ï¼‰**
```sh
beforeRouteLeave â†’ beforeEach â†’ beforeEnter â†’ beforeRouteEnter â†’ destroyed â†’ beforeUnmount
```

ğŸ“Œ **å…³é”®ç‚¹**
- `beforeEach` **å…ˆæ‰§è¡Œ**ï¼Œç»„ä»¶è¿˜æœªåˆ›å»ºã€‚
- `beforeRouteEnter` **æ¯” `created` æ—©æ‰§è¡Œ**ï¼Œä½†**ä¸èƒ½è®¿é—® `this`**ã€‚
- `beforeRouteLeave` **æ¯” `destroyed` æ—©æ‰§è¡Œ**ï¼Œå¯ç”¨äº**æ¸…ç†æ•°æ®**ã€‚

---

### 6. ç»“è®º

|**é’©å­ç±»å‹**|**è§¦å‘æ—¶æœº**|**é€‚ç”¨åœºæ™¯**|
|---|---|---|
|**`beforeEach`**|å…¨å±€è·¯ç”±è·³è½¬å‰|ç™»å½•æƒé™æ ¡éªŒ|
|**`beforeResolve`**|è§£æè·¯ç”±å‰|é¢„åŠ è½½æ•°æ®|
|**`afterEach`**|è·¯ç”±è·³è½¬å|è®°å½•è®¿é—®æ—¥å¿—|
|**`beforeEnter`**|è¿›å…¥æŸä¸ªè·¯ç”±å‰|é™åˆ¶è®¿é—®ï¼ˆå•ä¸ªé¡µé¢ï¼‰|
|**`beforeRouteEnter`**|ç»„ä»¶åˆ›å»ºå‰|é¢„åŠ è½½æ•°æ®ï¼ˆä¸èƒ½ç”¨ `this`ï¼‰|
|**`beforeRouteUpdate`**|ç»„ä»¶å‚æ•°æ›´æ–°|ç›‘å¬åŠ¨æ€å‚æ•°|
|**`beforeRouteLeave`**|ç»„ä»¶ç¦»å¼€å‰|æç¤ºä¿å­˜è¡¨å•æ•°æ®|

## 7. Vue-routerè·³è½¬å’Œlocation.hrefæœ‰ä»€ä¹ˆåŒºåˆ«

åœ¨ Vue åº”ç”¨ä¸­ï¼Œ**è·¯ç”±è·³è½¬**æœ‰ä¸¤ç§å¸¸è§æ–¹å¼ï¼š

1. **Vue Router æ–¹å¼**ï¼ˆ`$router.push()` / `useRouter().push()`ï¼‰
2. **åŸç”Ÿè·³è½¬**ï¼ˆ`window.location.href`ï¼‰

å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«åœ¨äº**é¡µé¢åˆ·æ–°ã€SPA ä½“éªŒã€å†å²è®°å½•ç®¡ç†å’Œå‚æ•°ä¼ é€’**ã€‚

---

### 1. `Vue Router` è·³è½¬

#### **âœ… ä½¿ç”¨ `push()`**

```js
this.$router.push("/home");  // Vue 2
```

```js
import { useRouter } from "vue-router";
const router = useRouter();
router.push("/home");  // Vue 3
```

#### **âœ… ä½¿ç”¨ `replace()`**

```js
this.$router.replace("/dashboard");
```

ğŸ“Œ **åŒºåˆ«**

- `push()` â†’ **æ·»åŠ æ–°å†å²è®°å½•**ï¼ˆå¯ä»¥å›é€€ï¼‰
- `replace()` â†’ **æ›¿æ¢å½“å‰å†å²è®°å½•**ï¼ˆä¸èƒ½å›é€€ï¼‰

#### **âœ… ä¼ é€’å‚æ•°**

##### **1ï¸âƒ£ `query` ä¼ å‚**

```js
this.$router.push({ path: "/home", query: { user: "Alice" } });
```

ğŸ“Œ **æœ€ç»ˆ URL**

```
http://example.com/home?user=Alice
```

##### **2ï¸âƒ£ `params` ä¼ å‚**

```js
this.$router.push({ name: "user", params: { id: 123 } });
```

ğŸ“Œ **æœ€ç»ˆ URL**

```
http://example.com/user/123
```

âš ï¸ **æ³¨æ„**

- `params` **ä¸èƒ½å’Œ `path` ä¸€èµ·ä½¿ç”¨**ï¼Œå¿…é¡»ç”¨ `name`ï¼š

```js
this.$router.push({ path: "/user", params: { id: 123 } }); // âŒ æ— æ•ˆ
```

âœ… **æ­£ç¡®å†™æ³•**
```js
this.$router.push({ name: "user", params: { id: 123 } });
```


---

### 2. `window.location.href` è·³è½¬

```js
window.location.href = "/home";
```

ğŸ“Œ **ç‰¹ç‚¹**

- **ä¼šåˆ·æ–°é¡µé¢**ï¼Œé‡æ–°åŠ è½½æ‰€æœ‰èµ„æºï¼ˆHTMLã€CSSã€JSï¼‰ã€‚
- **ä¸å— Vue Router æ§åˆ¶**ï¼Œä¸å½±å“ Vue ç»„ä»¶çŠ¶æ€ã€‚
- **é€‚ç”¨äºè·³è½¬å¤–éƒ¨é“¾æ¥**ï¼Œå¦‚ï¼š

```js
window.location.href = "https://google.com";
```

- **ä¸èƒ½ä¼  `params`ï¼Œåªèƒ½ç”¨ `query`**ï¼š
```js
window.location.href = "/home?user=Alice"; // åªèƒ½æ‰‹åŠ¨æ‹¼æ¥ URL
```

---

### 3. æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”

|**å¯¹æ¯”é¡¹**|**Vue Routerï¼ˆ`$router.push`ï¼‰**|**`window.location.href`ï¼ˆåŸç”Ÿè·³è½¬ï¼‰**|
|---|---|---|
|**é¡µé¢åˆ·æ–°**|âŒ **ä¸ä¼šåˆ·æ–°**ï¼ˆSPA å•é¡µé¢ä½“éªŒï¼‰|âœ… **ä¼šåˆ·æ–°**ï¼Œé‡æ–°åŠ è½½èµ„æº|
|**å†å²è®°å½•**|âœ… **ä¿ç•™å†å²è®°å½•**ï¼ˆå¯å›é€€ï¼‰|âŒ **è¦†ç›–å†å²**ï¼ˆå›é€€å¤±æ•ˆï¼‰|
|**å‚æ•°ä¼ é€’**|âœ… `params` / `query` ä¼ å‚|âŒ åªèƒ½æ‰‹åŠ¨æ‹¼æ¥ `query`|
|**è·¨åŸŸè·³è½¬**|âŒ åªèƒ½è·³è½¬ Vue å†…éƒ¨è·¯ç”±|âœ… **å¯è·³è½¬å¤–éƒ¨ç½‘ç«™**|
|**é€‚ç”¨åœºæ™¯**|ğŸ”¹ Vue å†…éƒ¨é¡µé¢åˆ‡æ¢|ğŸ”¹ å¤–éƒ¨é“¾æ¥ã€å¼ºåˆ¶åˆ·æ–°|
|**SEO å‹å¥½**|âŒ éœ€è¦ `history` æ¨¡å¼|âœ… é€‚ç”¨äº SSR é¡µé¢|

---

### 4. ä»€ä¹ˆæ—¶å€™ç”¨ `Vue Router`ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ `location.href`ï¼Ÿ

âœ… **`$router.push()` é€‚ç”¨äº**

- **SPA å†…éƒ¨è·³è½¬**ï¼ˆVue ç»„ä»¶åˆ‡æ¢ï¼Œä¸åˆ·æ–°é¡µé¢ï¼‰ã€‚
- **åŠ¨æ€å‚æ•°ä¼ é€’**ï¼ˆ`params`ã€`query`ï¼‰ã€‚
- **è·¯ç”±æƒé™æ§åˆ¶**ï¼ˆ`beforeEach()` å®ˆå«ï¼‰ã€‚

âœ… **`window.location.href` é€‚ç”¨äº**

- **è·³è½¬å¤–éƒ¨ç½‘ç«™**ï¼ˆå¦‚ `https://google.com`ï¼‰ã€‚
- **å¼ºåˆ¶åˆ·æ–°å½“å‰é¡µé¢**ï¼ˆå¦‚ `/dashboard?refresh=1`ï¼‰ã€‚
- **é Vue ç®¡ç†çš„é¡µé¢**ï¼ˆå¦‚ `iframe` å†…éƒ¨è·³è½¬ï¼‰ã€‚

---

### 5. `location.href` å¼ºåˆ¶åˆ·æ–° Vue é¡µé¢

æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Vue å†…éƒ¨**å¼ºåˆ¶åˆ·æ–°**é¡µé¢ï¼š

```js
window.location.reload();  // é‡æ–°åŠ è½½å½“å‰é¡µé¢
```

ğŸ“Œ **é€‚ç”¨äº**

- æ¸…ç©º Vue çŠ¶æ€ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ã€‚

---

### 6. ç»“è®º

|**åŠŸèƒ½**|**Vue Router**|**`window.location.href`**|
|---|---|---|
|**é¡µé¢åˆ·æ–°**|âŒ ä¸åˆ·æ–°ï¼ˆSPA å•é¡µé¢ï¼‰|âœ… åˆ·æ–°ï¼ˆé‡æ–°åŠ è½½èµ„æºï¼‰|
|**SEO å‹å¥½**|âŒ éœ€è¦ `history` æ¨¡å¼|âœ… é€‚ç”¨äº SSR|
|**å‚æ•°ä¼ é€’**|âœ… `params` / `query`|âŒ åªèƒ½æ‰‹åŠ¨æ‹¼æ¥ `query`|
|**é€‚ç”¨åœºæ™¯**|**Vue å†…éƒ¨è·¯ç”±åˆ‡æ¢**|**å¤–éƒ¨è·³è½¬ / å¼ºåˆ¶åˆ·æ–°**|

ğŸš€ **æœ€ä½³å®è·µ**

- **Vue å†…éƒ¨è·³è½¬** â†’ `this.$router.push()`
- **å¤–éƒ¨è·³è½¬** â†’ `window.location.href`
- **å¼ºåˆ¶åˆ·æ–°** â†’ `window.location.reload()`

## 8. paramså’Œqueryçš„åŒºåˆ«

åœ¨ Vue Router ä¸­ï¼Œ`params` å’Œ `query` éƒ½ç”¨äº**ä¼ é€’è·¯ç”±å‚æ•°**ï¼Œä½†å®ƒä»¬çš„**ç”¨æ³•ã€URL ç»“æ„ã€è·å–æ–¹å¼**æœ‰æ‰€ä¸åŒã€‚

---

### 1. `params`ï¼ˆè·¯å¾„å‚æ•°ï¼‰

âœ… **ç‰¹ç‚¹**

- ç›´æ¥åµŒå…¥ URL **è·¯å¾„**ï¼Œä¸å¸¦ `?`ã€‚
- **å¿…é¡»åœ¨ `path` å®šä¹‰æ—¶ä½¿ç”¨ `:param`**ã€‚
- **ä¸æ”¯æŒ `push({ path: ... })`ï¼Œå¿…é¡»ç”¨ `name`**ã€‚
- **åˆ·æ–°åä»ç„¶å­˜åœ¨**ï¼ˆå› ä¸ºå®ƒæ˜¯è·¯å¾„çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚

---

#### âœ… `params` ä¼ å‚ç¤ºä¾‹

##### ğŸ“Œ 1ï¸âƒ£ å®šä¹‰åŠ¨æ€è·¯ç”±
```js
const routes = [
  { path: "/user/:id", name: "user", component: User }
];
```

---

##### ğŸ“Œ 2ï¸âƒ£ ç¼–ç¨‹å¼å¯¼èˆª
```js
this.$router.push({ name: "user", params: { id: 123 } });
```

ğŸ“Œ **æœ€ç»ˆ URL**
```
http://example.com/user/123
```

---

##### ğŸ“Œ 3ï¸âƒ£ è·å– `params` å‚æ•°
**Vue 2**
```vue
<template>
  <div>ç”¨æˆ· ID: {{ $route.params.id }}</div>
</template>
```

**Vue 3ï¼ˆComposition APIï¼‰**
```vue
<script setup>
import { useRoute } from "vue-router";
const route = useRoute();
console.log("ç”¨æˆ· ID:", route.params.id);
</script>
```

ğŸ“Œ **`params` åªèƒ½åœ¨ `path` é‡Œå®šä¹‰çš„è·¯ç”±ä¸­ä½¿ç”¨**ã€‚

---

#### âœ… `params` ä¸èƒ½ä¸ `path` ä¸€èµ·ä½¿ç”¨
```js
this.$router.push({ path: "/user", params: { id: 123 } }); // âŒ æ— æ•ˆï¼
```

ğŸ“Œ **æ­£ç¡®å†™æ³•**
```js
this.$router.push({ name: "user", params: { id: 123 } }); // âœ…
```

---

#### âœ… `params` é€‚ç”¨åœºæ™¯

|**é€‚ç”¨æƒ…å†µ**|**ç¤ºä¾‹**|
|---|---|
|**ç”¨æˆ·è¯¦æƒ…é¡µ**|`/user/:id`ï¼ˆ`/user/123`ï¼‰|
|**å•†å“è¯¦æƒ…é¡µ**|`/product/:id`ï¼ˆ`/product/456`ï¼‰|
|**å±‚çº§è·¯ç”±**|`/category/:categoryId/product/:productId`|

---

### 2. `query`ï¼ˆæŸ¥è¯¢å‚æ•°ï¼‰

âœ… **ç‰¹ç‚¹**

- ä½œä¸º **URL æŸ¥è¯¢å­—ç¬¦ä¸²**ï¼Œä»¥ `?key=value` å½¢å¼å‡ºç°ã€‚
- **æ— éœ€åœ¨ `routes` é‡Œå®šä¹‰**ï¼Œä»»ä½•è·¯å¾„éƒ½å¯ä»¥æºå¸¦ `query`ã€‚
- **å¯ä»¥ä¸ `path` ä¸€èµ·ä½¿ç”¨**ã€‚
- **åˆ·æ–°åä»ç„¶å­˜åœ¨**ï¼ˆå› ä¸ºå®ƒæ˜¯ URL çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚

---

#### âœ… `query` ä¼ å‚ç¤ºä¾‹

##### ğŸ“Œ 1ï¸âƒ£ ç¼–ç¨‹å¼å¯¼èˆª
```js
this.$router.push({ path: "/home", query: { user: "Alice" } });
```

ğŸ“Œ **æœ€ç»ˆ URL**
```
http://example.com/home?user=Alice
```

---

##### ğŸ“Œ 2ï¸âƒ£ è·å– `query` å‚æ•°

**Vue 2**
```vue
<template>
  <div>æŸ¥è¯¢å‚æ•°: {{ $route.query.user }}</div>
</template>
```

**Vue 3ï¼ˆComposition APIï¼‰**
```vue
<script setup>
import { useRoute } from "vue-router";
const route = useRoute();
console.log("æŸ¥è¯¢å‚æ•°:", route.query.user);
</script>
```

ğŸ“Œ **`query` é€‚ç”¨äº** **æœç´¢ã€ç­›é€‰ã€åˆ†é¡µç­‰åŠŸèƒ½**ã€‚

---

#### âœ… `query` é€‚ç”¨åœºæ™¯

|**é€‚ç”¨æƒ…å†µ**|**ç¤ºä¾‹ URL**|
|---|---|
|**æœç´¢åŠŸèƒ½**|`/search?keyword=vue`|
|**ç­›é€‰æ¡ä»¶**|`/products?category=electronics&price=low`|
|**åˆ†é¡µ**|`/articles?page=2&limit=10`|

---

### 3. `params` vs `query` æ€»ç»“

|**å¯¹æ¯”é¡¹**|**`params`ï¼ˆè·¯å¾„å‚æ•°ï¼‰**|**`query`ï¼ˆæŸ¥è¯¢å‚æ•°ï¼‰**|
|---|---|---|
|**URL å½¢å¼**|`/user/:id` â†’ `/user/123`|`/home?user=Alice`|
|**å®šä¹‰æ–¹å¼**|å¿…é¡»åœ¨ `routes` é‡Œå®šä¹‰|ä»»ä½•è·¯ç”±éƒ½å¯ç”¨|
|**æ˜¯å¦å¯ä»¥ç›´æ¥ä¿®æ”¹**|âŒ ä¸èƒ½æ‰‹åŠ¨ä¿®æ”¹ URL|âœ… ç›´æ¥åœ¨æµè§ˆå™¨åœ°å€æ ä¿®æ”¹|
|**æ˜¯å¦æ”¯æŒ `path`**|âŒ åªèƒ½é…åˆ `name`|âœ… å¯ä»¥ç›´æ¥ `push({ path })`|
|**åˆ·æ–°æ˜¯å¦ä¿ç•™**|âœ… æ˜¯ï¼ˆå› ä¸ºåœ¨è·¯å¾„ä¸­ï¼‰|âœ… æ˜¯ï¼ˆå› ä¸ºåœ¨ URL ä¸­ï¼‰|
|**é€‚ç”¨åœºæ™¯**|è¯¦æƒ…é¡µï¼ˆç”¨æˆ· IDã€å•†å“ IDï¼‰|æœç´¢ã€ç­›é€‰ã€åˆ†é¡µ|

---

### 4. ä»€ä¹ˆæ—¶å€™ç”¨ `params`ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ `query`ï¼Ÿ

âœ… **`params` é€‚ç”¨äº**

- éœ€è¦ **å”¯ä¸€æ ‡è¯†èµ„æº**ï¼ˆå¦‚ç”¨æˆ· IDã€å•†å“ IDï¼‰ã€‚
- URL **å±‚çº§ç»“æ„æ¸…æ™°**ï¼ˆå¦‚ `/user/:id`ï¼‰ã€‚
- **é€‚åˆ RESTful é£æ ¼**ï¼ˆAPI ç«¯å¸¸ç”¨ `/users/:id`ï¼‰ã€‚

âœ… **`query` é€‚ç”¨äº**

- **æœç´¢ã€ç­›é€‰ã€åˆ†é¡µç­‰å¯é€‰å‚æ•°**ã€‚
- éœ€è¦**æ”¯æŒåŠ¨æ€å‚æ•°**ï¼ˆURL æ‰‹åŠ¨è¾“å…¥ï¼‰ã€‚
- **å¤šä¸ªå‚æ•°ç»„åˆ**ï¼ˆå¦‚ `/search?keyword=vue&page=2`ï¼‰ã€‚

---

### 5. ç»“è®º

|**ä½¿ç”¨åœºæ™¯**|**æ¨èæ–¹å¼**|**ç¤ºä¾‹**|
|---|---|---|
|**è¯¦æƒ…é¡µï¼ˆç”¨æˆ·ã€å•†å“ç­‰ï¼‰**|`params`|`/user/123`|
|**æœç´¢åŠŸèƒ½ï¼ˆkeywordï¼‰**|`query`|`/search?keyword=vue`|
|**åˆ†é¡µ**|`query`|`/articles?page=2&limit=10`|
|**ç­›é€‰ï¼ˆç±»åˆ«ã€ä»·æ ¼ç­‰ï¼‰**|`query`|`/products?category=books&price=low`|
|**å¯¼èˆªä¸æ”¹å˜ URL**|`params`|`/profile/:id`|

ğŸš€ **æœ€ä½³å®è·µ**

- **`params` é€‚ç”¨äºå±‚çº§è·¯ç”±ï¼ˆç”¨æˆ·/å•†å“è¯¦æƒ…ï¼‰**ã€‚
- **`query` é€‚ç”¨äºæœç´¢ã€ç­›é€‰ã€åˆ†é¡µç­‰éå¿…è¦å‚æ•°**ã€‚
- **RESTful API æ¨è `params`ï¼Œçµæ´»ä¼ å‚æ¨è `query`**ã€‚

âœ¨ **åˆç†ä½¿ç”¨ `params` å’Œ `query`ï¼Œä¼˜åŒ– Vue è·¯ç”±è®¾è®¡ï¼ğŸš€**
## 9. å¯¹å‰ç«¯è·¯ç”±çš„ç†è§£
å‰ç«¯è·¯ç”±ï¼ˆFrontend Routingï¼‰æ˜¯æŒ‡ **åœ¨å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ä¸­**ï¼Œ**ä½¿ç”¨ JavaScript åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹**ï¼Œ**æ›´æ–° URL å¹¶æ¸²æŸ“ä¸åŒçš„ç»„ä»¶æˆ–é¡µé¢**ã€‚

---

### 1. å‰ç«¯è·¯ç”±çš„å·¥ä½œåŸç†

åœ¨ä¼ ç»Ÿå¤šé¡µé¢åº”ç”¨ï¼ˆMPAï¼ŒMulti-Page Applicationï¼‰ä¸­ï¼Œæ¯æ¬¡é¡µé¢è·³è½¬éƒ½ä¼šå‘æœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ªæ–°çš„ HTML æ–‡ä»¶ï¼Œå¯¼è‡´é¡µé¢åˆ·æ–°ã€‚è€Œåœ¨ **å‰ç«¯è·¯ç”±** ä¸­ï¼š

- **ä¸ä¼šåˆ·æ–°é¡µé¢**
- **URL å˜åŒ–æ—¶ï¼Œå‰ç«¯åŠ¨æ€æ›´æ–°è§†å›¾**
- **å‡å°‘æœåŠ¡å™¨è¯·æ±‚ï¼Œæå‡ç”¨æˆ·ä½“éªŒ**
- **é€šå¸¸ä½¿ç”¨ `hash` æˆ– `history` API**

### **ğŸ“Œ ç¤ºä¾‹**

1. è®¿é—® `/home` æ—¶ï¼Œæ˜¾ç¤º `Home.vue`
2. è®¿é—® `/about` æ—¶ï¼Œæ˜¾ç¤º `About.vue`
3. **æ— éœ€é‡æ–°åŠ è½½é¡µé¢**ï¼Œä»…ä»…æ˜¯ç»„ä»¶çš„åˆ‡æ¢

---

### 2. å‰ç«¯è·¯ç”±çš„å®ç°æ–¹å¼

#### âœ… `hash` æ¨¡å¼

**åŸç†**ï¼šä½¿ç”¨ `window.location.hash` ç›‘å¬ `#` å˜åŒ–ï¼Œè¿›è¡Œé¡µé¢åˆ‡æ¢ã€‚

- `http://example.com/#/home`
- `http://example.com/#/about`

**å®ç°æ–¹å¼**

```js
window.addEventListener("hashchange", () => {
  console.log("å½“å‰ hash:", window.location.hash);
});
```

ğŸ“Œ **ç‰¹ç‚¹**

- **URL å¸¦ `#`ï¼Œä¸ç¾è§‚**
- **ä¸ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨**
- **å…¼å®¹æ€§å¥½ï¼ˆæ‰€æœ‰æµè§ˆå™¨æ”¯æŒï¼‰**

---

#### âœ… `history` æ¨¡å¼

**åŸç†**ï¼šä½¿ç”¨ `pushState()` / `replaceState()` ä¿®æ”¹ URLï¼ŒåŒæ—¶ç›‘å¬ `popstate` äº‹ä»¶è¿›è¡Œé¡µé¢åˆ‡æ¢ã€‚

- `http://example.com/home`
- `http://example.com/about`

**å®ç°æ–¹å¼**

```js
window.history.pushState({}, "", "/home");
window.addEventListener("popstate", () => {
  console.log("å½“å‰è·¯å¾„:", window.location.pathname);
});
```

ğŸ“Œ **ç‰¹ç‚¹**

- **URL æ²¡æœ‰ `#`ï¼Œæ›´ç¬¦åˆ RESTful è§„èŒƒ**
- **éœ€è¦æœåŠ¡å™¨æ”¯æŒï¼Œå¦åˆ™åˆ·æ–° 404**
- **SEO å‹å¥½ï¼Œé€‚åˆ SSR**

---

### 3. Vue Router å¤„ç†å‰ç«¯è·¯ç”±

Vue æä¾›äº† **Vue Router** è¿›è¡Œå‰ç«¯è·¯ç”±ç®¡ç†ã€‚

```js
import { createRouter, createWebHistory } from "vue-router";
import Home from "@/views/Home.vue";
import About from "@/views/About.vue";

const router = createRouter({
  history: createWebHistory(), // history æ¨¡å¼
  routes: [
    { path: "/home", component: Home },
    { path: "/about", component: About }
  ]
});

export default router;
```

ğŸ“Œ **Vue Router è®©å‰ç«¯è·¯ç”±ç®¡ç†æ›´ç®€å•ï¼Œæ”¯æŒ `hash` å’Œ `history` æ¨¡å¼ã€‚**

---

### 4. å‰ç«¯è·¯ç”±çš„æ ¸å¿ƒåŠŸèƒ½

|**åŠŸèƒ½**|**æè¿°**|**ç¤ºä¾‹**|
|---|---|---|
|**åŠ¨æ€è·¯ç”±**|ä½¿ç”¨ `:id` å®šä¹‰åŠ¨æ€è·¯å¾„|`/user/:id`|
|**ç¼–ç¨‹å¼å¯¼èˆª**|ç”¨ `push()` è¿›è¡Œè·³è½¬|`$router.push('/home')`|
|**è·¯ç”±å®ˆå«**|`beforeEach()` è¿›è¡Œæƒé™æ ¡éªŒ|`next('/login')`|
|**åµŒå¥—è·¯ç”±**|ç»„ä»¶å†…éƒ¨åµŒå¥—å­è·¯ç”±|`/user/:id/profile`|
|**æ‡’åŠ è½½**|ç»„ä»¶æŒ‰éœ€åŠ è½½ï¼Œæå‡æ€§èƒ½|`() => import('@/views/Home.vue')`|

---

### 5. å‰ç«¯è·¯ç”± vs åç«¯è·¯ç”±

|**å¯¹æ¯”é¡¹**|**å‰ç«¯è·¯ç”±ï¼ˆSPAï¼‰**|**åç«¯è·¯ç”±ï¼ˆMPAï¼‰**|
|---|---|---|
|**é¡µé¢åˆ·æ–°**|âŒ ä¸åˆ·æ–°é¡µé¢|âœ… æ¯æ¬¡è·³è½¬åˆ·æ–°|
|**è¯·æ±‚æ–¹å¼**|ä»…è¯·æ±‚ API æ•°æ®|æœåŠ¡å™¨è¿”å›æ•´ä¸ª HTML|
|**åŠ è½½é€Ÿåº¦**|**é¦–å±æ…¢ï¼Œåç»­å¿«**|**æ¯æ¬¡è·³è½¬éƒ½æ…¢**|
|**SEO å‹å¥½**|âŒ éœ€è¦ SSR|âœ… å¤©ç„¶æ”¯æŒ|
|**é€‚ç”¨åœºæ™¯**|**åå°ç®¡ç†ã€Web App**|**å®˜ç½‘ã€åšå®¢**|

---

### 6. ä»€ä¹ˆæ—¶å€™é€‰æ‹©å‰ç«¯è·¯ç”±ï¼Ÿä»€ä¹ˆæ—¶å€™é€‰æ‹©åç«¯è·¯ç”±ï¼Ÿ

âœ… **å‰ç«¯è·¯ç”±é€‚åˆ**

- **åå°ç®¡ç†ç³»ç»Ÿï¼ˆAdminï¼‰**
- **åœ¨çº¿åº”ç”¨ï¼ˆå¦‚ Vue åº”ç”¨ï¼‰**
- **ç§»åŠ¨ç«¯ Web App**

âœ… **åç«¯è·¯ç”±é€‚åˆ**

- **SEO éœ€æ±‚é«˜çš„ç«™ç‚¹ï¼ˆå¦‚åšå®¢ã€ä¼ä¸šå®˜ç½‘ï¼‰**
- **é™æ€é¡µé¢ï¼ˆå¦‚æ–‡æ¡£ã€å†…å®¹ç«™ï¼‰**

ğŸš€ **æ¨è**
- SEO éœ€æ±‚é«˜ â†’ **Nuxt.jsï¼ˆVue SSRï¼‰**
- åå°ç®¡ç† â†’ **Vue Routerï¼ˆSPAï¼‰**
- å¤§å‹é¡¹ç›® â†’ **ç»“åˆå‰åç«¯è·¯ç”±ï¼ˆå¦‚ SSR + APIï¼‰**

---

## **7. ç»“è®º**

|**å‰ç«¯è·¯ç”±ä¼˜ç‚¹**|**å‰ç«¯è·¯ç”±ç¼ºç‚¹**|
|---|---|
|âœ… é¡µé¢åˆ‡æ¢å¿«ï¼Œç”¨æˆ·ä½“éªŒå¥½|âŒ éœ€è¦æœåŠ¡ç«¯æ”¯æŒ `history`|
|âœ… æœåŠ¡å™¨å‹åŠ›å°ï¼Œå‡å°‘è¯·æ±‚|âŒ é¦–å±åŠ è½½è¾ƒæ…¢ï¼ˆéœ€ä¼˜åŒ–ï¼‰|
|âœ… æ”¯æŒåŠ¨æ€åŠ è½½ç»„ä»¶|âŒ SEO ä¸å‹å¥½ï¼ˆé™¤ SSR å¤–ï¼‰|

ğŸš€ **Vue Router æ˜¯å‰ç«¯è·¯ç”±çš„æœ€ä½³å®è·µï¼Œç»“åˆ `history` + `keep-alive` å¯ä»¥å¤§å¹…æå‡æ€§èƒ½ï¼** ğŸš€
