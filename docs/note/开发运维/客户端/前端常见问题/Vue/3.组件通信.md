
# ç»„ä»¶é€šä¿¡

Vue 3 æä¾›äº†å¤šç§ç»„ä»¶é€šä¿¡æ–¹å¼ï¼ŒåŒ…æ‹¬ **çˆ¶å­é€šä¿¡ã€å…„å¼Ÿé€šä¿¡ã€è·¨å±‚çº§é€šä¿¡ã€å…¨å±€çŠ¶æ€ç®¡ç†** ç­‰ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç» Vue 3 çš„ **å¸¸è§ç»„ä»¶é€šä¿¡æ–¹å¼** åŠå…¶é€‚ç”¨åœºæ™¯ã€‚

---

## 1. çˆ¶å­ç»„ä»¶é€šä¿¡

çˆ¶å­ç»„ä»¶çš„é€šä¿¡æ–¹å¼ä¸»è¦æœ‰ï¼š

- **`props`ï¼ˆçˆ¶ä¼ å­ï¼‰**
- **`$emit`ï¼ˆå­ä¼ çˆ¶ï¼‰**
- **`v-model`ï¼ˆåŒå‘ç»‘å®šï¼‰**

### (1) `props`ï¼ˆçˆ¶ä¼ å­ï¼‰

âœ… **é€‚ç”¨äº**ï¼šçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ã€‚

**ğŸ“Œ ç¤ºä¾‹**
```vue
<!-- çˆ¶ç»„ä»¶ -->
<template>
  <ChildComponent :message="msg" />
</template>

<script setup>
import ChildComponent from "./ChildComponent.vue";
import { ref } from "vue";

const msg = ref("Hello from Parent");
</script>
```

```vue
<!-- å­ç»„ä»¶ -->
<template>
  <p>çˆ¶ç»„ä»¶æ•°æ®: {{ message }}</p>
</template>

<script setup>
defineProps(["message"]); // Vue 3 ä½¿ç”¨ defineProps ä»£æ›¿ Vue 2 çš„ props
</script>
```

ğŸ“Œ **çˆ¶ç»„ä»¶é€šè¿‡ `props` å‘å­ç»„ä»¶ä¼ é€’ `message`ï¼Œå­ç»„ä»¶é€šè¿‡ `defineProps()` æ¥æ”¶æ•°æ®**ã€‚

---

### (2) `$emit`ï¼ˆå­ä¼ çˆ¶ï¼‰

âœ… **é€‚ç”¨äº**ï¼šå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’äº‹ä»¶æˆ–æ•°æ®ã€‚

**ğŸ“Œ ç¤ºä¾‹**
```vue
<!-- çˆ¶ç»„ä»¶ -->
<template>
  <ChildComponent @send-message="handleMessage" />
</template>

<script setup>
import ChildComponent from "./ChildComponent.vue";

const handleMessage = (msg) => {
  console.log("æ”¶åˆ°å­ç»„ä»¶æ•°æ®:", msg);
};
</script>
```

```vue
<!-- å­ç»„ä»¶ -->
<template>
  <button @click="sendMessage">å‘é€æ•°æ®</button>
</template>

<script setup>
import { defineEmits } from "vue";

const emit = defineEmits(["send-message"]);

const sendMessage = () => {
  emit("send-message", "Hello from Child");
};
</script>
```

ğŸ“Œ **å­ç»„ä»¶ `emit("send-message")` è§¦å‘äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ç›‘å¬å¹¶æ¥æ”¶æ•°æ®**ã€‚

---

### (3) `v-model`ï¼ˆåŒå‘ç»‘å®šï¼‰

âœ… **é€‚ç”¨äº**ï¼šçˆ¶å­ç»„ä»¶åŒå‘æ•°æ®ç»‘å®šã€‚

**ğŸ“Œ ç¤ºä¾‹**
```vue
<!-- çˆ¶ç»„ä»¶ -->
<template>
  <ChildComponent v-model="msg" />
</template>

<script setup>
import { ref } from "vue";
import ChildComponent from "./ChildComponent.vue";

const msg = ref("Hello Vue 3");
</script>
```

```vue
<!-- å­ç»„ä»¶ -->
<template>
  <input v-model="message" />
</template>

<script setup>
import { defineProps, defineEmits, computed } from "vue";

const props = defineProps(["modelValue"]);
const emit = defineEmits(["update:modelValue"]);

const message = computed({
  get: () => props.modelValue,
  set: (val) => emit("update:modelValue", val),
});
</script>
```

ğŸ“Œ **Vue 3 `v-model` é»˜è®¤ä½¿ç”¨ `modelValue`ï¼Œå­ç»„ä»¶é€šè¿‡ `emit("update:modelValue")` è§¦å‘æ›´æ–°**ã€‚

---

## 2. å…„å¼Ÿç»„ä»¶é€šä¿¡

Vue 3 æ²¡æœ‰ `this.$bus`ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

- **`mitt` äº‹ä»¶æ€»çº¿**
- **`ref()` / `reactive()` ä½œä¸ºå…±äº«çŠ¶æ€**

### (1) `mitt` äº‹ä»¶æ€»çº¿

âœ… **é€‚ç”¨äº**ï¼šå…„å¼Ÿç»„ä»¶ä¹‹é—´çš„äº‹ä»¶è§¦å‘ã€‚

**ğŸ“Œ å®‰è£… `mitt`**
```sh
npm install mitt
```

**ğŸ“Œ åˆ›å»ºäº‹ä»¶æ€»çº¿**
```js
// eventBus.js
import mitt from "mitt";
export const EventBus = mitt();
```

**ğŸ“Œ ç»„ä»¶ Aï¼ˆå‘é€æ•°æ®ï¼‰
```vue
<template>
  <button @click="sendData">å‘é€æ•°æ®</button>
</template>

<script setup>
import { EventBus } from "@/eventBus";

const sendData = () => {
  EventBus.emit("custom-event", "Hello from Component A");
};
</script>
```

**ğŸ“Œ ç»„ä»¶ Bï¼ˆæ¥æ”¶æ•°æ®ï¼‰**
```vue
<template>
  <p>æ”¶åˆ°æ•°æ®: {{ message }}</p>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from "vue";
import { EventBus } from "@/eventBus";

const message = ref("");

onMounted(() => {
  EventBus.on("custom-event", (data) => {
    message.value = data;
  });
});

onUnmounted(() => {
  EventBus.off("custom-event");
});
</script>
```

ğŸ“Œ **`mitt` å®ç°äº‹ä»¶æ€»çº¿ï¼Œå…„å¼Ÿç»„ä»¶å¯ä»¥è·¨å±‚çº§é€šä¿¡**ã€‚

---

### (2) `ref()` / `reactive()` ä½œä¸ºå…±äº«çŠ¶æ€

âœ… **é€‚ç”¨äº**ï¼šç®€å•çŠ¶æ€å…±äº«ã€‚

**ğŸ“Œ å…±äº«çŠ¶æ€**
```js
// store.js
import { reactive } from "vue";

export const globalState = reactive({
  message: "Hello Vue 3"
});
```

**ğŸ“Œ ç»„ä»¶ Aï¼ˆä¿®æ”¹æ•°æ®ï¼‰**
```vue
<template>
  <button @click="changeMessage">ä¿®æ”¹æ•°æ®</button>
</template>

<script setup>
import { globalState } from "@/store";

const changeMessage = () => {
  globalState.message = "Updated by Component A";
};
</script>
```

**ğŸ“Œ ç»„ä»¶ Bï¼ˆè¯»å–æ•°æ®ï¼‰**
```vue
<template>
  <p>å…¨å±€æ•°æ®: {{ globalState.message }}</p>
</template>

<script setup>
import { globalState } from "@/store";
</script>
```

ğŸ“Œ **ä½¿ç”¨ `reactive()` è®©å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€ï¼Œé¿å… `props` å±‚å±‚ä¼ é€’**ã€‚

---

## 3. è·¨ç»„ä»¶/å…¨å±€é€šä¿¡

å¯¹äº**æ·±å±‚åµŒå¥—ç»„ä»¶æˆ–è·¨é¡µé¢çŠ¶æ€ç®¡ç†**ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

- **`provide/inject`ï¼ˆç¥–å­™é€šä¿¡ï¼‰**
- **`Pinia`ï¼ˆå…¨å±€çŠ¶æ€ç®¡ç†ï¼‰**

---

### (1) `provide/inject`ï¼ˆç¥–å­™ç»„ä»¶é€šä¿¡ï¼‰

âœ… **é€‚ç”¨äº**ï¼šè·¨å±‚çº§ç»„ä»¶æ•°æ®ä¼ é€’ã€‚

 **ğŸ“Œ çˆ¶ç»„ä»¶ï¼ˆæä¾›æ•°æ®ï¼‰**
```vue
<template>
  <ChildComponent />
</template>

<script setup>
import { provide, ref } from "vue";
import ChildComponent from "./ChildComponent.vue";

const message = ref("Hello from Parent");
provide("globalMessage", message);
</script>
```

ğŸ“Œ å­ç»„ä»¶ï¼ˆæ¥æ”¶æ•°æ®ï¼‰**
```vue
<template>
  <p>çˆ¶ç»„ä»¶æä¾›çš„æ•°æ®: {{ globalMessage }}</p>
</template>

<script setup>
import { inject } from "vue";

const globalMessage = inject("globalMessage");
</script>
```

ğŸ“Œ **`provide()` åœ¨ç¥–ç»„ä»¶æä¾›æ•°æ®ï¼Œ`inject()` åœ¨åä»£ç»„ä»¶ä¸­æ¥æ”¶æ•°æ®**ã€‚

---

### (2) `Pinia`ï¼ˆå…¨å±€çŠ¶æ€ç®¡ç†ï¼‰

âœ… **é€‚ç”¨äº**ï¼šå¤æ‚çŠ¶æ€ç®¡ç†ã€å¤šä¸ªé¡µé¢å…±äº«çŠ¶æ€ã€‚

**ğŸ“Œ å®‰è£… `Pinia`**
```sh
npm install pinia
```

**ğŸ“Œ åˆ›å»ºå…¨å±€çŠ¶æ€**
```js
// store.js
import { defineStore } from "pinia";

export const useMainStore = defineStore("main", {
  state: () => ({
    message: "Hello Pinia"
  }),
  actions: {
    setMessage(newMsg) {
      this.message = newMsg;
    }
  }
});
```

**ğŸ“Œ ç»„ä»¶ Aï¼ˆä¿®æ”¹çŠ¶æ€ï¼‰**
```vue
<template>
  <button @click="updateMessage">ä¿®æ”¹çŠ¶æ€</button>
</template>

<script setup>
import { useMainStore } from "@/store";

const store = useMainStore();

const updateMessage = () => {
  store.setMessage("Updated by Component A");
};
</script>
```

**ğŸ“Œ ç»„ä»¶ Bï¼ˆè¯»å–çŠ¶æ€ï¼‰**
```vue
<template>
  <p>å…¨å±€æ•°æ®: {{ store.message }}</p>
</template>

<script setup>
import { useMainStore } from "@/store";

const store = useMainStore();
</script>
```

ğŸ“Œ **Pinia é€‚åˆå…¨å±€çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒ `setup()` å’Œ `Options API`ã€‚**

---

## **4. ç»„ä»¶é€šä¿¡æ–¹å¼å¯¹æ¯”**

|**æ–¹å¼**|**é€‚ç”¨åœºæ™¯**|**Vue 3 API**|
|---|---|---|
|**`props` / `$emit`**|çˆ¶å­ç»„ä»¶é€šä¿¡|`defineProps` / `defineEmits`|
|**`v-model`**|çˆ¶å­åŒå‘ç»‘å®š|`v-model`|
|**`mitt`**|å…„å¼Ÿç»„ä»¶é€šä¿¡|`mitt.emit()` / `mitt.on()`|
|**`reactive()`**|å…±äº«çŠ¶æ€|`reactive()` / `ref()`|
|**`provide/inject`**|ç¥–å­™ç»„ä»¶é€šä¿¡|`provide()` / `inject()`|
|**`Pinia`**|å…¨å±€çŠ¶æ€ç®¡ç†|`defineStore()`|

ğŸš€ **Vue 3 æ¨è `Pinia` è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†ï¼Œ`mitt` é€‚åˆè½»é‡çº§äº‹ä»¶é€šä¿¡ï¼**









